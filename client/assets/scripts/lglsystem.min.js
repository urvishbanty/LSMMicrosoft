var app=angular.module("lglsystem",["ngRoute","chart.js","ui.bootstrap","ngSanitize","ngAria","ngMaterial","ui.grid","ui.grid.edit","ui.grid.rowEdit","ui.grid.autoResize","ngLoadingSpinner","ui.grid.moveColumns","ui.grid.resizeColumns","ui.grid.selection","ui.grid.cellNav","ui.grid.pinning"]);!function(){"use strict";angular.module("lglsystem").config(["$routeProvider",function(e){e.when("/main",{templateUrl:"views/partials/main.html",controller:"mainController"}).when("/vendor",{templateUrl:"views/partials/vendormain.html",controller:"vendormainController"}).when("/budjet",{templateUrl:"views/partials/budjetmain.html",controller:"budjetmainController"}).when("/mattersummery",{templateUrl:"views/partials/mattersummerymain.html",controller:"mattersummeryController"}).when("/dashboard",{templateUrl:"views/partials/mydashboard.html",controller:"dashboardController"}).otherwise({redirectTo:"/dashboard"})}]).config(["ChartJsProvider",function(e){e.setOptions({chartColors:["#E9C24D","#7658F9","#2ed700","#FF5252","#a5ce00","#FF8A80","#0078d7"],responsive:!0}),e.setOptions("line",{showLines:!0})}])}(),function(){"use strict";angular.module("lglsystem").constant("jrconstants",{WS:"/sap/opu/odata/SAP/",serviceUrl:"/sap/opu/odata/SAP/ZPRS_LSW_SRV/",wsParms:{ZPRS_WIP_EDITOR_SRV:"ZPRS_WIP_EDITOR_SRV",ZPRS_VALUE_HELP_SRV:"ZPRS_VALUE_HELP_SRV",ZPRS_MATTER_CODES_SRV:"ZPRS_MATTER_CODES_SRV",ZPRS_LSW_SRV:"ZPRS_LSW_SRV",ZPRS_LSW_VENDOR_SRV:"ZPRS_LSW_VENDOR_SRV",ZPRS_CREC_UPLOAD_SRV:"ZPRS_CREC_UPLOAD_SRV",ZPRS_CREC_UPLOAD_MS_SRV:"ZPRS_CREC_UPLOAD_MS_SRV",ZPRS_LSW_VMATTERS_BUDGET_SRV:"ZPRS_LSW_VMATTERS_BUDGET_SRV",ZPRS_FILE_ATTACHMENT_SRV:"ZPRS_FILE_ATTACHMENT_SRV",ZPRS_FILE_ATTCH_SRV:"ZPRS_FILE_ATTACHMENT_SRV",ZPRS_MATTER_SUMMARY_REPT_SRV:"ZPRS_MATTER_SUMMARY_REPT_SRV",ZPRS_LSW_CMATTER_SEARCHHELP_SRV:"ZPRS_LSW_CMATTER_SEARCHHELP_SRV",ZPRS_LSW_CMATTERS_SRV:"ZPRS_LSW_CMATTERS_SRV"},services:{InvHeaderSet:"/InvHeaderSet",InvHeaderToDetail:"/InvHeaderToDetail",InvHeaderToStatus:"/InvHeaderToStatus",RejectInvoice:"/RejectInvoice?",ApproveInvoice:"/ApproveInvoice?",ClientDetailSet:"/ClientDetailSet",VendorDataSet:"/VendorDataSet",CrecupdSet:"/CrecupdSet?",BudgetDetailSet:"/BudgetDetailSet",BudgetUpload:"/BudgetUpload",BudgetChange:"/BudgetChange",AcceptPending:"/AcceptPending?",FileListSet:"/FileListSet",MatterReptSet:"/MatterReptSet",ZprsShWerksSet:"/ZprsShWerksSet",HeaderSet:"/HeaderSet",CounVendorSet:"/CounVendorSet",AddMaintInvoice:"/AddMaintInvoice"},action:{CONSOLIDATE:"'CONSOLIDATE'",SPLIT:"'SPLIT'",TRANSFER:"'TRANSFER'",EDIT:"'EDIT'"},qParms:{SESSION_ID:"?session_id=",FILTER:"?$filter=",JSON:"&$format=json",DATAJSON:"?$format=json",METADATA:"/$metadata",ACTION:"?Action=",value:"/$value"},lsValues:{SESSION_ID:localStorage.getItem("sid"),USER_ID:localStorage.getItem("uid"),CONUMBER:"&CoNumber=",Buzei:"&Buzei=",Hours:"&Hours=",Percentage:"&Percentage=",ToActivityCode:"&ToActivityCode=",ToFfActivityCode:"&ToFfActivityCode=",ToFfTaskCode:"&ToFfTaskCode=",ToMatter:"&ToMatter=",ToTaskCode:"&ToTaskCode=",Zzfiletype:"Zzfiletype=",Zzfilename:"Zzfilename=",Zzseqnr:"Zzseqnr=",ZzinvoiceNumber:"ZzinvoiceNumber=",ZzComments:"ZzComments=",ZzclientId:"ZzclientId=",RecordType:"&RecordType=",Bukrs:"Bukrs=",Werks:"&Werks=",Pspid:"&Pspid=",Vendor:"&Vendor=",Status:"&Status=",Name1:"&Name1=",Gjahr:"&Gjahr=",Posid:"&Posid=",Hkont:"&Hkont=",Amount:"&Amount=",Currency:"&Currency="}})}(),function(){"use strict";function e(e,l,t,i,a,r,n){function s(){n.getFileList(r.selectedinvoiceNumber).then(function(l){l&&(e.currentFileList=l.d.results)})}e.cancel=function(){t.dismiss("cancel")},s(),e.opendocument=function(e){n.getFileDownload(e,"_self")},e.deletedocument=function(l){n.deletedocument(r.selectedinvoiceNumber,l).then(function(t){if(t){if(!_.isUndefined(t.d)){var i=t.d;if(t){var r=i.Message;a.show(a.alert().title("Alert").textContent(r).ariaLabel("Alert Dialog Demo").ok("Ok"))}e.currentFileList=_.filter(e.currentFileList,function(e){return e!=l})}_.isUndefined(t.error)||(l.info=t.error.message.value,l.imagedisplay="/assets/images/img_alert_split-screen.png")}})}}angular.module("lglsystem").controller("billdocattachments",e),e.$inject=["$scope","$filter","$modalInstance","$modal","$mdDialog","lglsystemData","invoiceService"]}(),function(){"use strict";function e(e,l,t,i,a,r,n,s){function d(l){t.getBudjetData(l).then(function(l){l&&(e.budjetmasterlist=l.d.results,e.budjetmasterlistcopy=angular.copy(e.budjetmasterlist),e.filterOptionColumn())})}function o(l){if(r.lsmbudetcolumns=e.gridData.columnDefs,r.settingvariable="budetsettings","settings"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/lsmtimekeepersettings.html",size:"sm",bindToController:!0,controller:"lsmtimekeepersettingsController"});t.result.then(function(l){e.gridData.columnDefs=l},function(){console.log("Modal dismissed at: "+new Date)})}}function c(l){var i=_.filter(e.budjetmasterlistcopy,function(e){return e.isSelect}),a=_.filter(e.budjetmasterlistcopy,function(e){return e.isSelect&&"Approved"==e.StatusText});if(a.length>0){var r=s.confirm().title("Please Confirm?").textContent("Are you sure you want to change the approved budget amount?").ariaLabel("Lucky day").targetEvent(event).ok("Ok").cancel("Cancel");s.show(r).then(function(){t.budjetactions(i,l).then(function(l){if(l)for(var t=l.d.results,a=0;a<i.length;a++){var r=_.filter(e.budjetmasterlistcopy,function(e){return e==i[a]}),n=t[a].Message;r[0].info=n,r[0].info.indexOf("ERROR")!=-1||r[0].info.indexOf("Error")!=-1?r[0].imagedisplay="/assets/images/img_alert_split-screen.png":"X"!=t[a].Iserror?r[0].imagedisplay="/assets/images/alertsuccess.png":r[0].imagedisplay="/assets/images/img_alert_split-screen.png"}if(!_.isUndefined(l.error))for(var a=0;a<i.length;a++){var r=_.filter(e.budjetmasterlistcopy,function(e){return e==i[a]});r[0].info=l.error.message.value,r[0].imagedisplay="/assets/images/img_alert_split-screen.png"}})},function(){})}else t.budjetactions(i,l).then(function(l){if(l)for(var t=l.d.results,a=0;a<i.length;a++){var r=_.filter(e.budjetmasterlistcopy,function(e){return e==i[a]}),n=t[a].Message;r[0].info=n,r[0].info.indexOf("ERROR")!=-1||r[0].info.indexOf("Error")!=-1?r[0].imagedisplay="/assets/images/img_alert_split-screen.png":"X"!=t[a].Iserror?r[0].imagedisplay="/assets/images/alertsuccess.png":r[0].imagedisplay="/assets/images/img_alert_split-screen.png"}if(!_.isUndefined(l.error))for(var a=0;a<i.length;a++){var r=_.filter(e.budjetmasterlistcopy,function(e){return e==i[a]});r[0].info=l.error.message.value,r[0].imagedisplay="/assets/images/img_alert_split-screen.png"}})}function u(){e.getallbudjets()}function m(l){var t=e.gridData.columnDefs,i=[];_.each(l,function(e){var l={};_.each(t,function(t){if(!_.isUndefined(t.field)){var i=t.name.trim();_.isUndefined(e[i])?l[t.field]="":"Datab"==t.field||"Datbi"==t.field?l[t.field]=h(e[i]):l[t.field]=e[i]}}),i.push(l)});e.exceldata=i;for(var a=!0,r=0;r<e.exceldata.length;r++)if(e.exceldata[r].hasOwnProperty("RecordType")&&"B"!=e.exceldata[r].RecordType){s.show(s.alert().title("Excel Error").textContent("The file is inconsistent").ariaLabel("The file is inconsistent").ok("Ok")),a=!1;break}a&&(e.exceldatagrid=angular.copy(e.exceldata),e.budjetmasterlist=angular.copy(e.exceldatagrid),e.budjetmasterlistcopy=angular.copy(e.budjetmasterlist),e.$apply())}function f(e){for(var l="",t=0,i=10240;t<e.byteLength/i;++t)l+=String.fromCharCode.apply(null,new Uint8Array(e.slice(t*i,t*i+i)));return l+=String.fromCharCode.apply(null,new Uint8Array(e.slice(t*i)))}function g(e){var l={};return e.SheetNames.forEach(function(t){var i=z.utils.sheet_to_row_object_array(e.Sheets[t]);i.length>0&&(l[t]=i)}),l}function h(e){var l=new Date(e),t=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));return"/Date("+t.getTime()+")/"}function p(e,l){l&&(e+=1462);var t=Date.parse(e);return(t-new Date(Date.UTC(1899,11,30)))/864e5}function C(e,l){for(var t={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},a=0;a!=e.length;++a)for(var r=0;r!=e[a].length;++r){i.s.r>a&&(i.s.r=a),i.s.c>r&&(i.s.c=r),i.e.r<a&&(i.e.r=a),i.e.c<r&&(i.e.c=r);var n={v:e[a][r]};if(null!=n.v){var s=XLSX.utils.encode_cell({c:r,r:a});"number"==typeof n.v?n.t="n":"boolean"==typeof n.v?n.t="b":n.v instanceof Date?(n.t="n",n.z=XLSX.SSF._table[14],n.v=p(n.v)):n.t="s",t[s]=n}}return i.s.c<1e7&&(t["!ref"]=XLSX.utils.encode_range(i)),t}function y(){return this instanceof y?(this.SheetNames=[],void(this.Sheets={})):new y}function D(e){for(var l=new ArrayBuffer(e.length),t=new Uint8Array(l),i=0;i!=e.length;++i)t[i]=255&e.charCodeAt(i);return l}e.issideActive=!0,e.dynamicPopover={templateUrl:"gridfilter.html",title:"Filters"},e.budjetmasterlist=[],e.activesideButton=function(){e.issideActive=!e.issideActive},e.cancel=function(){$modalInstance.dismiss("cancel")},e.checkboxmodel={},e.checkboxmodel.clientselectedAll=!1;var b='<md-tooltip md-direction="left" ng-if="row.entity.info">{{row.entity.info}}</md-tooltip><img ng-if="row.entity.info"  ng-src="{{row.entity.imagedisplay}}"></img>',v='<md-checkbox ng-model="row.entity.isSelect"></md-checkbox>',Z='<md-checkbox type="checkbox" ng-change="grid.appScope.clientcheckAll()" ng-model="grid.appScope.checkboxmodel.clientselectedAll"></md-checkbox>';e.clientcheckAll=function(){angular.forEach(e.budjetmasterlistcopy,function(l){l.isSelect=e.checkboxmodel.clientselectedAll})},e.gridData={enableSorting:!0,enableRowSelection:!1,enableRowHeaderSelection:!1,enableColumnResizing:!0,multiSelect:!1,enableGridMenu:!1,rowHeight:70,data:"budjetmasterlistcopy",columnDefs:[{name:"",allowCellFocus:!1,enableCellEdit:!1,pinnedLeft:!0,headerCellTemplate:Z,field:"Bukrs",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:v,width:40},{name:"info",allowCellFocus:!1,enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:b,width:100},{name:"RecordType",visible:!1,displayName:"RecordType",enableCellEdit:!1,field:"RecordType",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Vendor",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Vendor + " - " +row.entity.Name1+""}}</div>',enableCellEdit:!1,field:"Vendor",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0},{name:"Vendor Name",visible:!1,enableCellEdit:!1,field:"Name1",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Compcode",visible:!1,field:"Bukrs",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:100},{name:"Office",visible:!1,field:"Werks",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:100},{name:"Matter",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Pspid + " - " +row.entity.Post1}}</div>',field:"Pspid",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0},{name:"Matter Name",visible:!1,field:"Post1",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:200},{name:"Status",field:"StatusText",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:250},{name:"Fiscal Year",visible:!1,field:"Gjahr",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"GL Account",visible:!1,enableCellEdit:!1,field:"Hkont",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Amount",enableCellEdit:!0,field:"Amount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Currency",enableCellEdit:!0,field:"Currency",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Matter Phase",visible:!1,displayName:"Matter Phase",enableCellEdit:!1,field:"Posid",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150}]},e.gridData.enableCellEditOnFocus=!0,e.getallbudjets=d,e.popoverclose=function(){$("[data-toggle='popover']").click()},e.filterOptionColumn=function(){e.Vendor=[],e.VName=[],e.Compcode=[],e.Office=[],e.Matter=[],e.MName=[],e.Status=[],e.Fyear=[],e.GLA=[],e.Amount=[],e.Currency=[],e.Mphase=[],e.filterCheckedArray=[{fieldname:"Vendor",checkedarray:[]},{fieldname:"Name1",checkedarray:[]},{fieldname:"Bukrs",checkedarray:[]},{fieldname:"Werks",checkedarray:[]},{fieldname:"Pspid",checkedarray:[]},{fieldname:"Post1",checkedarray:[]},{fieldname:"StatusText",checkedarray:[]},{fieldname:"Gjahr",checkedarray:[]},{fieldname:"Hkont",checkedarray:[]},{fieldname:"Amount",checkedarray:[]},{fieldname:"Currency",checkedarray:[]},{fieldname:"Matter Phase",checkedarray:[]}],e.dataforFiltering=angular.copy(e.budjetmasterlistcopy),e.dataforFilteringcopy=angular.copy(e.budjetmasterlistcopy),_.forOwn(e.dataforFiltering,function(l){null!=l.Vendor&&""!=l.Vendor&&e.Vendor.push({FilterValue:l.Vendor,filterId:"Vendor"}),null!=l.Name1&&""!=l.Name1&&e.VName.push({FilterValue:l.Name1,filterId:"Name1"}),null!=l.Bukrs&&""!=l.Bukrs&&e.Compcode.push({FilterValue:l.Bukrs,filterId:"Bukrs"}),null!=l.Werks&&""!=l.Werks&&e.Office.push({FilterValue:l.Werks,filterId:"Werks"}),null!=l.Pspid&&""!=l.Pspid&&e.Matter.push({FilterValue:l.Pspid,filterId:"Pspid"}),null!=l.Post1&&""!=l.Post1&&e.MName.push({FilterValue:l.Post1,filterId:"Post1"}),null!=l.StatusText&&""!=l.StatusText&&e.Status.push({FilterValue:l.StatusText,filterId:"StatusText"}),null!=l.Gjahr&&""!=l.Gjahr&&e.Fyear.push({FilterValue:l.Gjahr,filterId:"Gjahr"}),null!=l.Hkont&&""!=l.Hkont&&e.GLA.push({FilterValue:l.Hkont,filterId:"Hkont"}),null!=l.Amount&&""!=l.Amount&&e.Amount.push({FilterValue:l.Amount,filterId:"Amount"}),null!=l.Currency&&""!=l.Currency&&e.Currency.push({FilterValue:l.Currency,filterId:"Currency"}),null!=l.Posid&&""!=l.Posid&&e.Mphase.push({FilterValue:l.Posid,filterId:"Posid"})}),e.gridFiltercolumDef=angular.copy(e.gridData.columnDefs);var l=angular.copy(e.gridData.columnDefs);_.forOwn(l,function(l){switch(l.field){case"Vendor":e.Vendor.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Name1":e.VName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Bukrs":e.Compcode.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Werks":e.Office.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Pspid":e.Matter.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Post1":e.MName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"StatusText":e.Status.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Gjahr":e.Fyear.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Hkont":e.GLA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Amount":e.Amount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Currency":e.Currency.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Posid":e.Mphase.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1}}),e.gridData.columnDefs=l},e.chekboxevent=function(l,t,i){i.IsSelect?i.IsSelect=!0:i.IsSelect=!1,_.forOwn(e.filterCheckedArray,function(e){if(e.fieldname==t){var i=e.checkedarray,a=i.indexOf(l);a===-1?e.checkedarray.push(l):e.checkedarray.splice(a,1)}}),e.filterMultipleColumns()},e.showhide=function(l,t){var i=angular.copy(e.gridData.columnDefs);_.forOwn(i,function(i){if(i.field===l&&i.name==t)if(i.showhide)i.showhide=!1;else{switch(i.showhide=!0,i.field){case"Vendor":i.FiltercolumnDef=e.Vendor;break;case"Name1":i.FiltercolumnDef=e.VName;break;case"Bukrs":i.FiltercolumnDef=e.Compcode;break;case"Werks":i.FiltercolumnDef=e.Office;break;case"Pspid":i.FiltercolumnDef=e.Matter;break;case"Post1":i.FiltercolumnDef=e.MName;break;case"ZzmatterName":i.FiltercolumnDef=e.MName;break;case"StatusText":i.FiltercolumnDef=e.Status;break;case"Gjahr":i.FiltercolumnDef=e.Fyear;break;case"Hkont":i.FiltercolumnDef=e.GLA;break;case"Amount":i.FiltercolumnDef=e.Amount;break;case"Currency":i.FiltercolumnDef=e.Currency;break;case"Posid":i.FiltercolumnDef=e.Mphase}var a=_.map(_.uniq(_.map(i.FiltercolumnDef,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});i.FiltercolumnDef=a}_.forOwn(e.filterCheckedArray,function(e){i.field===e.fieldname&&_.forOwn(i.FiltercolumnDef,function(l){e.checkedarray.indexOf(l.FilterValue)>-1&&(l.IsSelect=!0)})})}),e.gridData.columnDefs=i},e.filterMultipleColumns=function(){var l=!0,t="",i=[];e.setVal=!1,e.finalFilterarray=[],e.Filterdatafil=angular.copy(e.dataforFilteringcopy),_.forOwn(e.filterCheckedArray,function(i){i.checkedarray.length&&l&&(t=i.fieldname,_.forOwn(i.checkedarray,function(l){_.forOwn(e.Filterdatafil,function(t){l!=t.Vendor&&l!=t.Name1&&l!=t.Bukrs&&l!=t.Werks&&l!=t.Pspid&&l!=t.Post1&&l!=t.StatusText&&l!=t.Gjahr&&l!=t.Amount&&l!=t.Currency&&l!=t.Posid||e.finalFilterarray.push(t)})}),e.setVal=!0,l=!1)});var a=0;_.forOwn(e.filterCheckedArray,function(l){l.checkedarray.length&&t!=l.fieldname&&_.forOwn(e.finalFilterarray,function(e){_.forOwn(l.checkedarray,function(l){a+=1,l!=e.Vendor&&l!=e.Name1&&l!=e.Bukrs&&l!=e.Werks&&l!=e.Pspid&&l!=e.Post1&&l!=e.StatusText&&l!=e.Gjahr&&l!=e.Amount&&l!=e.Currency&&l!=e.Posid||i.push(e)})})}),0===i.length&&0==a&&(i=e.finalFilterarray);var r=_.map(_.uniq(_.map(i,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});e.setVal?e.budjetmasterlistcopy=r:e.budjetmasterlistcopy=angular.copy(e.dataforFilteringcopy)},e.filterRemoveItem=function(l,t){_.forOwn(e.filterCheckedArray,function(i){if(i.fieldname===t){var a=i.checkedarray,r=a.indexOf(l);if(r!=-1){i.checkedarray.splice(r,1);var n=angular.copy(e.gridData.columnDefs);_.forOwn(n,function(e){e.FiltercolumnDef&&_.forOwn(e.FiltercolumnDef,function(e){l==e.FilterValue&&(e.IsSelect=!1)})}),e.gridData.columnDefs=n,e.filterMultipleColumns()}}})},e.showFormModal=o,e.save=c,u(),e.exceldatagrid=[];var z=XLSX;e.handleFile=function(l){var l=document.getElementById("xlf");e.$apply(function(e){var t=l.files[0],i=new FileReader;t.name;i.onload=function(e){var l=e.target.result,t=f(l),i=z.read(btoa(t),{type:"base64"}),a=JSON.stringify(g(i),2,2),r=angular.fromJson(a);m(r.BudgetTable),console.log(a)},i.readAsArrayBuffer(t),xlf.value=""})},e.matterdetailsearchinput="",e.filterdata=function(){var t=angular.copy(e.budjetmasterlistcopy);if(""!=e.matterdetailsearchinput){var i=l("filter")(t,e.matterdetailsearchinput,void 0);e.budjetmasterlistcopy=i}else e.budjetmasterlistcopy=angular.copy(e.budjetmasterlist)},e.downloadfile=function(){var t=angular.copy(e.budjetmasterlist),i=[],a=angular.copy(e.gridData.columnDefs);a=_.remove(a,function(e){return"Compcode"==e.name||"Office"==e.name||"Matter"==e.name||"Matter Name"==e.name||"Vendor"==e.name||"Status"==e.name||"Vendor Name"==e.name||"Fiscal Year"==e.name||"Matter Phase"==e.name||"GL Account"==e.name||"Amount"==e.name||"Currency"==e.name||"RecordType"==e.name});var r=[],n=[];_.each(a,function(e){r.push(e.name),n.push(e.field)}),i.push(r),_.each(t,function(e){var t=[];_.each(n,function(i){var a=e[i];_.isUndefined(a)||a.indexOf("Date")==-1?t.push(e[i]):t.push(l("dateFilter")(e[i]))}),i.push(t)});var s="BudgetTable",d=new y,o=C(i);d.SheetNames.push(s),d.Sheets[s]=o;var c=XLSX.write(d,{bookType:"xlsx",bookSST:!0,type:"binary"});new Date;e.ddMMyyyy=l("date")(new Date,"ddMMyyyy");var u="Budget_Table.xlsx";saveAs(new Blob([D(c)],{type:"application/octet-stream"}),u)},e.isacceptenable=function(){var l=_.filter(e.budjetmasterlistcopy,function(e){return e.isSelect});return l.length>0}}angular.module("lglsystem").controller("budjetmainController",e),e.$inject=["$scope","$filter","invoiceService","$modal","$timeout","lglsystemData","jrconstants","$mdDialog"]}(),function(){"use strict";function e(e,l,t,i,a){console.log(a.detailmode);var r='<md-tooltip md-direction="left" ng-if="row.entity.statusmessageinfo">{{row.entity.statusmessageinfo}}</md-tooltip><span ng-class="grid.appScope.getEditBackgroundColour(row.entity)">{{row.entity.statusmessage}}</span>',n='<md-checkbox ng-model="row.entity.isSelect" ng-click="$event.stopPropagation()"></md-checkbox>',s='<md-checkbox type="checkbox" ng-change="grid.appScope.clientcheckAll()" ng-model="grid.appScope.checkboxmodel.clientselectedAll"></md-checkbox>',d='<div ng-click="$event.stopPropagation();grid.appScope.getFileList(row.entity)" ng-if="row.entity.HasAttachments"  class="wp_filterblue wp_cofile blue wp_page_cl05"></div>',o='<i style="color:red;" ng-if="row.entity.ZzrejComments" ng-click="$event.stopPropagation();grid.appScope.showcomments(row.entity.ZzrejComments)" class="fa fa-info-circle fa-2x"></i>';a.detailmode===!1&&(e.lsmcolumnsgrid=a.lsmdetailscolumns,e.lsmcolumns=[{name:"",allowCellFocus:!1,pinnedLeft:!0,headerCellTemplate:s,field:"Zzebeln",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:n,width:40},{name:"Matter",pinnedLeft:!0,field:"ZzlawFirmMatterId",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZzmatterName + " - " +row.entity.ZzlawFirmMatterId+""}}</div>'},{name:"Vendor ",field:"ZzvendorName",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"Purchase Order",pinnedLeft:!0,field:"Zzebeln",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Invoice Number",field:"ZzinvoiceNumber",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Status",pinnedLeft:!0,field:"statusmessage",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:r},{name:"Client Id",field:"ZzclientId",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZzclientidName + " - " + row.entity.ZzclientId +""}}</div>'},{name:"Vendor Tax Id",field:"ZzlawFirmTaxid",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Invoice Date",field:"ZzinvoiceDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzinvoiceDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"150"},{name:"Work Start Date",field:"ZzbillingStartDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzbillingStartDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"150"},{name:"Work End Date",field:"ZzbillingEndDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzbillingEndDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"150"},{name:"Reviewer",field:"ZzreviewerName",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"120"},{name:"Billing Office Name",field:"ZzbillingOfficeName",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"Days of Outstanding",field:"Zzdaysoutstanding",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Payment Terms",field:"Zterm",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"Billed Amount",field:"ZzinvoiceTotal",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Currency",field:"ZzinvCurrency",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Tax Amount",field:"ZztaxAmount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Matter Budget Amount",field:"ZzmatterBudget",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Remaining Budget Amount",field:"ZZREMAIN_BDGT",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Attachments",field:"HasAttachments",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:d,width:"120"},{name:"Reject Comments",allowCellFocus:!1,field:"ZzrejComments",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:o}]),a.detailmode===!0&&(e.lsmcolumnsgrid=a.lsmdetailsdatacolumns,e.lsmcolumns=[{name:"Line Item",pinnedLeft:!0,field:"ZzlineItemNumber",disableHiding:!0,width:"100",headerCellClass:"gridHead gridCell",cellClass:"gridCell"},{name:"Matter Phase",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Zzphase + " - " +row.entity.ZzphaseName+""}}</div>',pinnedLeft:!0,field:"Zzphase",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"TK Name",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZztimekeeperId + "-" +row.entity.ZztimekeeperName+")"}}</div>',pinnedLeft:!0,field:"ZztimekeeperName",disableHiding:!0,width:"100",headerCellClass:"gridHead gridCell",cellClass:"gridCell"},{name:"Activity Type",field:"Zzlstar",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Working Office",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZzworkingOffice + "(" +row.entity.ZzworkingOfficeName+")"}}</div>',field:"ZzworkingOffice",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Work Date",field:"ZzlineItemDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzlineItemDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"100"},{name:"Status",pinnedLeft:!0,field:"statusmessage",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100",cellTemplate:r},{name:"Units",field:"Units",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Billed Rate",field:"ZzbilledRate",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Agreed Rate",field:"ZzagreedRate",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Amount",field:"Amount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Tax",field:"Tax",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Discount",field:"Discount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Agreed Discount",field:"AgreedDiscount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Total",field:"Total",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Task Code",field:"ZztaskCode",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Activity Code",field:"ZzactivityCode",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Narrative",field:"ZzlineItemDescription",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"400"}]),_.each(e.lsmcolumns,function(l){l.isSelect=!1,_.find(e.lsmcolumnsgrid,function(e){return e.name==l.name})&&(l.isSelect=!0)}),e.selectall=!1,e.cancel=function(){t.dismiss("cancel")},e.selectallitems=function(){_.each(e.lsmcolumns,function(l){l.isSelect=e.selectall})},e.setColumns=function(){var l=[],l=_.filter(e.lsmcolumns,function(e){return e.isSelect});_.each(l,function(e){e.Visible=!1}),t.close(l)}}angular.module("lglsystem").controller("lsmsettingsController",e),e.$inject=["$scope","$filter","$modalInstance","$modal","lglsystemData"]}(),function(){"use strict";function e(e,l,t,i,a){if("timekeepersetting"===a.settingvariable){var r='<md-tooltip md-direction="left" ng-if="row.entity.info">{{row.entity.info}}</md-tooltip><img ng-if="row.entity.info"  ng-src="{{row.entity.imagedisplay}}"></img>',n='<md-checkbox ng-model="row.entity.isSelect"></md-checkbox>',s='<md-checkbox type="checkbox" ng-change="grid.appScope.clientcheckAll()" ng-model="grid.appScope.checkboxmodel.clientselectedAll"></md-checkbox>';e.lsmcolumnsgrid=a.lsmtimekeepercolumns,e.lsmcolumns=[{name:"",enableFiltering:!1,pinnedLeft:!0,enableCellEdit:!1,allowCellFocus:!1,headerCellTemplate:s,field:"Kunnr",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:n,width:40},{name:"info",enableCellEdit:!1,enableFiltering:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:r,width:100},{name:"Matter",enableCellEdit:!1,field:"Pspid",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:200},{name:"Matter Name",field:"Post1",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:200},{name:"TimeKeeper",field:"Pernr",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:200},{name:"Timekeeper Name",enableCellEdit:!1,field:"Sname",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:200},{name:"Rate",enableFiltering:!1,enableCellEdit:!1,field:"Kbetr",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Currency",enableFiltering:!1,enableCellEdit:!1,field:"Konwa",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Status",enableFiltering:!1,enableCellEdit:!1,field:"Status",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Status| vendorfilter}}</div>',width:100},{name:"PricingUnit",enableFiltering:!1,enableCellEdit:!1,field:"Kpein",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Unit",enableFiltering:!1,enableCellEdit:!1,field:"Kmein",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"DateFrom",enableFiltering:!1,enableCellEdit:!1,field:"Datab",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.Datab| dateFilter | date:'MM/dd/yyyy'}}</div>",width:150},{name:"DateTo",enableFiltering:!1,enableCellEdit:!1,field:"Datbi",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.Datbi| dateFilter | date:'MM/dd/yyyy'}}</div>",width:150}]}if("budetsettings"===a.settingvariable){var r='<md-tooltip md-direction="left" ng-if="row.entity.info">{{row.entity.info}}</md-tooltip><img ng-if="row.entity.info"  ng-src="{{row.entity.imagedisplay}}"></img>',n='<md-checkbox ng-model="row.entity.isSelect"></md-checkbox>',s='<md-checkbox type="checkbox" ng-change="grid.appScope.clientcheckAll()" ng-model="grid.appScope.checkboxmodel.clientselectedAll"></md-checkbox>';e.lsmcolumnsgrid=a.lsmbudetcolumns,e.lsmcolumns=[{name:"",allowCellFocus:!1,enableCellEdit:!1,pinnedLeft:!0,headerCellTemplate:s,field:"Bukrs",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:n,width:40},{name:"info",allowCellFocus:!1,enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:r,width:100},{name:"Vendor",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Vendor + " - " +row.entity.Name1+""}}</div>',enableCellEdit:!1,field:"Vendor",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0},{name:"Vendor Name",visible:!1,enableCellEdit:!1,field:"Name1",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Compcode",visible:!1,field:"Bukrs",enableCellEdit:!1,disableHiding:!0,
headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:100},{name:"Office",visible:!1,field:"Werks",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:100},{name:"Matter",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Pspid + " - " +row.entity.Post1}}</div>',field:"Pspid",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0},{name:"Matter Name",visible:!1,field:"Post1",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:200},{name:"Status",field:"StatusText",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:250},{name:"Fiscal Year",visible:!1,field:"Gjahr",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"GL Account",visible:!1,enableCellEdit:!1,field:"Hkont",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Amount",enableCellEdit:!0,field:"Amount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Currency",enableCellEdit:!0,field:"Currency",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150},{name:"Matter Phase",visible:!1,displayName:"Matter Phase",enableCellEdit:!1,field:"Posid",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:150}]}_.each(e.lsmcolumns,function(l){l.isSelect=!1,_.find(e.lsmcolumnsgrid,function(e){return e.name==l.name})&&(l.isSelect=!0)}),e.selectall=!1,e.cancel=function(){t.dismiss("cancel")},e.selectallitems=function(){_.each(e.lsmcolumns,function(l){l.isSelect=e.selectall})},e.setColumns=function(){var l=[],l=_.filter(e.lsmcolumns,function(e){return e.isSelect});_.each(l,function(e){e.Visible=!1}),t.close(l)}}angular.module("lglsystem").controller("lsmtimekeepersettingsController",e),e.$inject=["$scope","$filter","$modalInstance","$modal","lglsystemData"]}(),function(){"use strict";function e(e,l,t,i,a,r,n,s,d){function o(l){t.getDetailInvoices(l).then(function(t){t&&(e.invoicesdetaillist=t.d.results,e.invoicesdetaillistcopy=angular.copy(e.invoicesdetaillist),e.detailmode=!0,r.detailmode=e.detailmode,e.filterOptionColumn(),_.each(e.invoicesdetaillistcopy,function(t){var i=l.ZzlawFirmMatterId+" - "+l.ZzmatterName,a=l.ZzinvoiceNumber+"("+e.filtergridtype+")";e.headerline=i+", Invoice Number : "+a;var n=r.selectedrow.statuslog;if("Success"!=r.selectedrow.statusmessage){var s=_.find(n,{ZzlineItem:t.ZzlineItemNumber});_.isUndefined(s)||(t.statusmessage="Error","L"==s.MessageLevel&&(t.statusmessageinfo=s.ZzmessageLog))}}))})}function c(l){if("filter"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/masterFilter.html",size:"md",bindToController:!0,controller:"masterfilterController"});t.result.then(function(l){e.getInvoiceDetails()},function(){console.log("Modal dismissed at: "+new Date)})}if("reject"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/reject.html",size:"md",bindToController:!0,controller:"rejectController"});t.result.then(function(e){var l=e.d.Message;l&&(alert(l),u())},function(){console.log("Modal dismissed at: "+new Date)})}}function u(){e.filtergridtype=r.gridtype,e.paymentmode=r.paymentmode,e.paymode=r.paymode,e.getallInvoices()}function m(t){r.gridtype=t,e.filtergridtype=r.gridtype,e.isRowSelected=!1;var i=angular.copy(e.invoicesmasterlist),a=_.find(e.gridData.columnDefs,function(e){return"Reject Comments"==e.name});switch(t){case"pending":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"01"}),_.isUndefined(a)||(a.visible=!1),e.filterOptionColumn();break;case"approved":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"02"}),_.isUndefined(a)||(a.visible=!1),e.filterOptionColumn();break;case"rejected":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"03"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn();break;case"review":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"04"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn();break;case"hold":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"05"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn();break;case"paid":e.invoicesmasterlistcopy=l("filter")(i,{ZzpayStatus:"01"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn();break;case"processed":e.invoicesmasterlistcopy=l("filter")(i,{ZzpayStatus:"02"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn();break;case"apppayment":e.invoicesmasterlistcopy=l("filter")(i,{ZzpayStatus:"03"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn();break;case"failed":e.invoicesmasterlistcopy=l("filter")(i,{ZzpayStatus:"04"}),_.isUndefined(a)||(a.visible=!0),e.filterOptionColumn()}e.invoicesdetaillistcopy=[]}function f(l){r.paymentmode=l,"pay"==l?(e.paymode=!0,e.filtergrid("paid"),e.header="Payment Status",e.headerline="Invoice Detail"):(e.paymode=!1,e.filtergrid("pending"),e.header="My Invoices")}function g(){var l=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});t.createInvoices(l).then(function(e){if(e){var l=e.d.Message;l&&(s.show(s.alert().title("Invoice").textContent(l).ariaLabel("Alert Dialog Demo").ok("Ok")),u())}})}function h(l){var i=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});t.acceptpending(i,l).then(function(e){if(e){var l=e.d.Message;l&&(s.show(s.alert().title("Invoice").textContent(l).ariaLabel("Alert Dialog Demo").ok("Ok")),u())}})}function c(l){if(r.lsmdetailscolumns=e.gridData.columnDefs,r.lsmdetailsdatacolumns=e.gridDetailsData.columnDefs,r.detailmode=e.detailmode,"addinvoice"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/addinvoice.html",size:"sm",bindToController:!0,controller:"addinvoiceController"});t.result.then(function(e){},function(){console.log("Modal dismissed at: "+new Date)})}if("vendor"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/vendormain.html",size:"lg",bindToController:!0,controller:"vendormainController"});t.result.then(function(e){},function(){console.log("Modal dismissed at: "+new Date)})}if("reject"===l){var a=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});r.selectedrows=a;var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/reject.html",size:"md",bindToController:!0,controller:"rejectController"});t.result.then(function(e){var l=e.d.Message;l&&(s.show(s.alert().title("Invoice").textContent(l).ariaLabel("Alert Dialog Demo").ok("Ok")),u())},function(){})}if("filter"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/masterFilter.html",size:"md",bindToController:!0,controller:"masterfilterController"});t.result.then(function(l){e.getInvoiceDetails()},function(){})}if("settings"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/lsmsettings.html",size:"sm",bindToController:!0,controller:"lsmsettingsController"});t.result.then(function(l){r.detailmode?e.gridDetailsData.columnDefs=l:e.gridData.columnDefs=l},function(){console.log("Modal dismissed at: "+new Date)})}}function p(l,i){var a="";$.ajax({url:n.serviceUrl,headers:{"X-CSRF-Token":"fetch"},success:function(l,r,n){a=n.getResponseHeader("X-CSRF-Token"),t.FileUploadclient(a,i).then(function(l){l&&e.getallInvoices()})}})}function C(l,i){r.selectedinvoiceNumber="";var a={};a.Name=l;var d=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});a.Vbeln=d[0].ZzinvoiceNumber;var o="";$.ajax({url:n.serviceUrl,headers:{"X-CSRF-Token":"fetch"},success:function(l,r,n){o=n.getResponseHeader("X-CSRF-Token"),t.FileUploadAttachclient(a,o,i).then(function(l){if(l&&(e.getallInvoices(),!_.isUndefined(l.data))){var t=l.data;if(l){var i=t.d.Msg;s.show(s.alert().title("Alert").textContent(i).ariaLabel("Alert Dialog Demo").ok("Ok"))}}})}})}function y(e){r.comments=e;var l=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/rejectcomment.html",size:"sm",bindToController:!0,controller:"rejectcommentController"});l.result.then(function(e){},function(){})}e.issideActive=!1,e.detailmode=!1,e.invoicesmasterlist=[],e.activesideButton=function(){e.issideActive=!e.issideActive},e.dynamicPopover={templateUrl:"gridfilter.html",title:"Filters"},e.checkboxmodel={},e.checkboxmodel.clientselectedAll=!1;var D='<md-tooltip md-direction="left" ng-if="row.entity.statusmessageinfo">{{row.entity.statusmessageinfo}}</md-tooltip><span ng-class="grid.appScope.getEditBackgroundColour(row.entity)">{{row.entity.statusmessage}}</span>',b='<md-checkbox ng-model="row.entity.isSelect" ng-click="$event.stopPropagation()"></md-checkbox>',v='<md-checkbox type="checkbox" ng-change="grid.appScope.clientcheckAll()" ng-model="grid.appScope.checkboxmodel.clientselectedAll"></md-checkbox>',Z='<div ng-click="$event.stopPropagation();grid.appScope.getFileList(row.entity)" ng-if="row.entity.HasAttachments"  class="wp_filterblue wp_cofile blue wp_page_cl05"></div>',z='<i ng-if="row.entity.ZzrejComments" style="color:red;" ng-click="$event.stopPropagation();grid.appScope.showcomments(row.entity.ZzrejComments)" class="fa fa-info-circle fa-2x"></i>';e.clientcheckAll=function(){angular.forEach(e.invoicesmasterlistcopy,function(l){l.isSelect=e.checkboxmodel.clientselectedAll})},e.gridData={enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,enableColumnResizing:!0,multiSelect:!1,enableGridMenu:!1,rowHeight:70,data:"invoicesmasterlistcopy",columnDefs:[{name:"",allowCellFocus:!1,pinnedLeft:!0,headerCellTemplate:v,field:"Zzebeln",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:b,width:40},{name:"Matter",pinnedLeft:!0,field:"ZzlawFirmMatterId",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZzmatterName + " - " +row.entity.ZzlawFirmMatterId+""}}</div>'},{name:"Vendor ",field:"ZzvendorName",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"Purchase Order",pinnedLeft:!0,field:"Zzebeln",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Invoice Number",field:"ZzinvoiceNumber",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Status",pinnedLeft:!0,field:"statusmessage",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:D},{name:"Client Id",field:"ZzclientId",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZzclientidName + " - " + row.entity.ZzclientId +""}}</div>'},{name:"Vendor Tax Id",field:"ZzlawFirmTaxid",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Invoice Date",field:"ZzinvoiceDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzinvoiceDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"150"},{name:"Work Start Date",field:"ZzbillingStartDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzbillingStartDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"150"},{name:"Work End Date",field:"ZzbillingEndDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzbillingEndDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"150"},{name:"Reviewer",field:"ZzreviewerName",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"120"},{name:"Billing Office Name",field:"ZzbillingOfficeName",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"Days of Outstanding",field:"Zzdaysoutstanding",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Payment Terms",field:"Zterm",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"Billed Amount",field:"ZzinvoiceTotal",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Currency",field:"ZzinvCurrency",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Tax Amount",field:"ZztaxAmount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Matter Budget Amount",field:"ZzmatterBudget",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Remaining Budget Amount",field:"ZZREMAIN_BDGT",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150"},{name:"Attachments",field:"HasAttachments",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:Z,width:"120"},{name:"Reject Comments",allowCellFocus:!1,field:"ZzrejComments",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"150",cellTemplate:z}]},e.isRowSelected=!1,e.gridData.onRegisterApi=function(l){e.gridApi=l,l.selection.on.rowSelectionChanged(e,function(l){"row selected "+l.isSelected;e.isRowSelected=l.isSelected,r.selectedrow=l.entity,o(l.entity)})},e.gridDetailsData={enableSorting:!0,enableColumnResizing:!0,rowHeight:70,enableGridMenu:!1,data:"invoicesdetaillistcopy",selectedItems:e.selectedRows,columnDefs:[{name:"Line Item",pinnedLeft:!0,field:"ZzlineItemNumber",disableHiding:!0,width:"100",headerCellClass:"gridHead gridCell",cellClass:"gridCell"},{name:"Matter Phase",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Zzphase + " - " +row.entity.ZzphaseName+""}}</div>',pinnedLeft:!0,field:"Zzphase",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"200"},{name:"TK Name",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZztimekeeperId + " - " +row.entity.ZztimekeeperName+")"}}</div>',pinnedLeft:!0,field:"ZztimekeeperName",disableHiding:!0,width:"100",headerCellClass:"gridHead gridCell",cellClass:"gridCell"},{name:"Activity Type",field:"Zzlstar",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Working Office",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.ZzworkingOffice + "(" +row.entity.ZzworkingOfficeName+")"}}</div>',field:"ZzworkingOffice",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Work Date",field:"ZzlineItemDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ZzlineItemDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:"100"},{name:"Status",pinnedLeft:!0,field:"statusmessage",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100",cellTemplate:D},{name:"Units",field:"Units",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Billed Rate",field:"ZzbilledRate",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Agreed Rate",field:"ZzagreedRate",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Amount",field:"Amount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Tax",field:"Tax",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Discount",field:"Discount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Agreed Discount",field:"AgreedDiscount",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Total",field:"Total",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Task Code",field:"ZztaskCode",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Activity Code",field:"ZzactivityCode",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"100"},{name:"Narrative",field:"ZzlineItemDescription",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:"400"}]},e.pendingcount=0,e.approvedcount=0,e.rejectedcount=0,e.reviewcount=0,e.holdcount=0,e.paidcount=0,e.processedcount=0,e.apppaymentount=0,e.failedcount=0,e.getFileList=function(e,l){r.selectedinvoiceNumber=e.ZzinvoiceNumber;var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/opendocumentdialog.html",size:"sm",bindToController:!0,controller:"billdocattachments"});t.result.then(function(e){},function(){})},e.getallInvoices=function(i){t.getInvoices(i).then(function(i){i&&(e.invoicesmasterlist=i.d.results,0!=e.invoicesmasterlist.length&&_.each(e.invoicesmasterlist,function(i){t.getDetailInvoicesstatus(i).then(function(t){if(t)if(i.statuslog=t.d.results,""==i.ZzpayStatus?(i.statusmessage="Success",i.statusmessageinfo="",_.each(i.statuslog,function(e){i.statusmessage="Error",i.statusmessageinfo=i.statusmessageinfo+"\n"+e.ZzmessageLog})):(i.statusmessage=i.ZzpaystatMes,i.statusmessageinfo=""),e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlist),e.pendingcount=_.filter(e.invoicesmasterlistcopy,function(e){return"01"==e.ZzinvStatus}).length,e.approvedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"02"==e.ZzinvStatus}).length,e.rejectedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"03"==e.ZzinvStatus}).length,e.reviewcount=_.filter(e.invoicesmasterlistcopy,function(e){return"04"==e.ZzinvStatus}).length,e.holdcount=_.filter(e.invoicesmasterlistcopy,function(e){return"05"==e.ZzinvStatus}).length,e.paidcount=_.filter(e.invoicesmasterlistcopy,function(e){return"01"==e.ZzpayStatus}).length,e.processedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"02"==e.ZzpayStatus}).length,e.apppaymentount=_.filter(e.invoicesmasterlistcopy,function(e){return"03"==e.ZzpayStatus}).length,e.failedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"04"==e.ZzpayStatus}).length,e.invoicesmasterlistcopy=l("filter")(e.invoicesmasterlistcopy,{ZzinvStatus:"01"}),e.gridData.data=e.invoicesmasterlistcopy,""==e.filtergridtype){e.filtergridtype="pending";var a=_.find(e.gridData.columnDefs,function(e){return"Reject Comments"==e.name});_.isUndefined(a)||(a.visible=!1),m(e.filtergridtype)}else m(e.filtergridtype)})}))})},e.showFormModal=c,e.getInvoiceDetails=function(){var i=[],n=[],s=[];_.each(r.invoicenumberfilter,function(e){i.push({field:"ZzinvoiceNumber",search:e,search1:"",type:"equal",filtertype:"include",isand:!0})}),_.each(r.matterfilter,function(e){i.push({field:"ZzlawFirmMatterId",search:e,search1:"",type:"equal",filtertype:"include",isand:!0})}),_.each(r.vendornumberfilter,function(e){i.push({field:"Vendor",search:e,search1:"",type:"equal",filtertype:"include",isand:!0})}),_.each(i,function(e){switch(e.type){case"equal":e.isand?n.push({filteredQuery:"("+e.field+" eq '"+e.search+"')",operator:"and"}):n.push({filteredQuery:"("+e.field+" eq '"+e.search+"')",operator:"or"}),console.log(n);break;case"contains":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"substringof('"+e.search+"',"+e.field+")",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:" not substringof('"+e.search+"',"+e.field+")",operator:"and"});break;case"startswith":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"startswith("+e.field+",'"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:" not startswith("+e.field+",'"+e.search+"')",operator:"and"});break;case"endswith":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"endswith("+e.field+",'"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:" not endswith("+e.field+",'"+e.search+"')",operator:"and"});break;case"between":_.isUndefined(e.isDate)?e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"(("+e.field+" ge '"+e.search+"') and ("+e.field+" le '"+e.search1+"'))",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"(not("+e.field+" ge '"+e.search+"') and ("+e.field+" le '"+e.search1+"'))",operator:"and"}):e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"(("+e.field+" ge datetime'"+e.search+"') and ("+e.field+" le datetime'"+e.search1+"'))",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"(not("+e.field+" ge datetime'"+e.search+"') and ("+e.field+" le datetime'"+e.search1+"'))",operator:"and"});break;case"lessthan":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" lt '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" lt '"+e.search+"')",operator:"and"});break;case"lessthanequalto":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" le '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" le '"+e.search+"')",operator:"and"});break;case"greaterthan":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" gt '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" gt '"+e.search+"')",operator:"and"});break;case"greaterthanequalto":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" ge '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" ge '"+e.search+"')",operator:"and"})}});var d=[],o="Erdat",c=l("date")(new Date(r.wrkdate),"yyyy-MM-ddT00:00:00"),u=l("date")(new Date(r.wrkdateto),"yyyy-MM-ddT00:00:00");d="(("+o+" ge datetime'"+c+"') and ("+o+" le datetime'"+u+"'))",t.getInvoicesFilter(n,d).then(function(i){i&&(e.invoicesmasterlist=i.d.results,console.log("innn",e.invoicesmasterlist),e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlist),0!=e.invoicesmasterlistcopy.length&&_.each(e.invoicesmasterlistcopy,function(i){t.getDetailInvoicesstatus(i).then(function(t){t&&(i.statuslog=t.d.results,""==i.ZzpayStatus?(i.statusmessage="Success",i.statusmessageinfo="",_.each(i.statuslog,function(e){i.statusmessage="Error",i.statusmessageinfo=i.statusmessageinfo+"\n"+e.ZzmessageLog})):(i.statusmessage=i.ZzpaystatMes,i.statusmessageinfo=""),e.pendingcount=_.filter(e.invoicesmasterlistcopy,function(e){return"01"==e.ZzinvStatus}).length,e.approvedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"02"==e.ZzinvStatus}).length,e.rejectedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"03"==e.ZzinvStatus}).length,e.invoicesmasterlistcopy=l("filter")(e.invoicesmasterlistcopy,{ZzinvStatus:"01"}),""==e.filtergridtype?(e.filtergridtype="pending",m(e.filtergridtype)):m(e.filtergridtype),e.gridData.data=e.invoicesmasterlistcopy,a(function(){e.gridApi.selection.selectRow&&e.gridApi.selection.selectRow(e.gridData.data[0])}))})}))})},u(),e.filtergrid=m,e.filtergridtype=r.gridtype,r.paymode||(e.paymode=!1,e.header="My Invoices",e.headerline="Invoice Detail Line item Detail",e.paymentmode=f),e.createinvoice=g,e.acceptpending=h,e.filterdata=function(){var t=angular.copy(e.invoicesmasterlist);if(""!=e.matterdetailsearchinput){var i=l("filter")(t,e.matterdetailsearchinput,void 0);switch(e.filtergridtype){case"pending":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"01"});break;case"approved":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"02"});break;case"rejected":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"03"})}}else switch(e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlistcopy),e.filtergridtype){case"pending":e.invoicesmasterlistcopy=l("filter")(t,{ZzinvStatus:"01"});break;case"approved":e.invoicesmasterlistcopy=l("filter")(t,{ZzinvStatus:"02"});break;case"rejected":e.invoicesmasterlistcopy=l("filter")(t,{ZzinvStatus:"03"})}},e.getEditBackgroundColour=function(e){return"Error"!=e.statusmessage?"selectgreen":"selectred"},e.showhideinner=function(l,t){var i=angular.copy(e.gridDetailsData.columnDefs);_.forOwn(i,function(i){if(i.field===l&&i.name==t)if(i.showhide)i.showhide=!1;else{switch(i.showhide=!0,i.field){case"ZzlineItemNumber":i.FiltercolumnDef=e.LI;break;case"ZztimekeeperId":i.FiltercolumnDef=e.TKID;break;case"ZztimekeeperName":i.FiltercolumnDef=e.TKName;break;case"ZzlineItemDate":i.FiltercolumnDef=e.WDate;break;case"ZzbillingEndDate":i.FiltercolumnDef=e.WED;break;case"ZzlineItemDate":i.FiltercolumnDef=e.InStatus;break;case"ZzlineItemDate":i.FiltercolumnDef=e.WO;break;case"ZzworkingOfficeName":i.FiltercolumnDef=e.WOName;break;case"Zzphase":i.FiltercolumnDef=e.Mphase;break;case"ZzphaseName":i.FiltercolumnDef=e.MPhaseName;break;case"ZzbilledRate":i.FiltercolumnDef=e.BRate;break;case"ZzagreedRate":i.FiltercolumnDef=e.AgreedRate;break;case"Units":i.FiltercolumnDef=e.Units;break;case"Amount":i.FiltercolumnDef=e.Amount;break;case"Tax":i.FiltercolumnDef=e.Tax;break;case"Discount":i.FiltercolumnDef=e.Discount;break;case"AgreedDiscount":i.FiltercolumnDef=e.AgreedDiscount;break;case"Total":i.FiltercolumnDef=e.Total;break;case"ZztaskCode":i.FiltercolumnDef=e.TC;break;case"ZzactivityCode":i.FiltercolumnDef=e.AC;break;case"ZzlineItemDescription":i.FiltercolumnDef=e.Narrative}var a=_.map(_.uniq(_.map(i.FiltercolumnDef,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});i.FiltercolumnDef=a}_.forOwn(e.filterCheckedArrayinner,function(e){i.field===e.fieldname&&_.forOwn(i.FiltercolumnDef,function(l){e.checkedarray.indexOf(l.FilterValue)>-1&&(l.IsSelect=!0)})})}),e.gridDetailsData.columnDefs=i},e.showhide=function(l,t){var i=angular.copy(e.gridData.columnDefs);_.forOwn(i,function(i){if(i.field===l&&i.name==t)if(i.showhide)i.showhide=!1;else{switch(i.showhide=!0,i.field){case"Zzebeln":i.FiltercolumnDef=e.PO;break;case"ZzinvoiceNumber":i.FiltercolumnDef=e.IN;break;case"ZzinvoiceDate":i.FiltercolumnDef=e.ID;break;case"ZzbillingStartDate":i.FiltercolumnDef=e.WSD;break;case"ZzbillingEndDate":i.FiltercolumnDef=e.WED;break;case"ZzlawFirmMatterId":i.FiltercolumnDef=e.MN;break;case"ZzmatterName":i.FiltercolumnDef=e.MName;break;case"ZzrecvDate":i.FiltercolumnDef=e.RD;break;case"ZzvendorName":i.FiltercolumnDef=e.VID;break;case"ZzlawFirmTaxid":i.FiltercolumnDef=e.VTID;break;case"ZzreviewerName":i.FiltercolumnDef=e.Reviewer;break;case"ZzbillingOfficeName":i.FiltercolumnDef=e.BON;break;case"Zzdaysoutstanding":i.FiltercolumnDef=e.DOFOS;break;case"ZzclientId":i.FiltercolumnDef=e.CID;break;case"ZzclientidName":i.FiltercolumnDef=e.CName;break;case"Zterm":i.FiltercolumnDef=e.PTerms;break;case"ZzinvoiceTotal":i.FiltercolumnDef=e.BA;break;case"ZzinvCurrency":i.FiltercolumnDef=e.Currency;break;case"ZztaxAmount":i.FiltercolumnDef=e.TA;break;case"ZzmatterBudget":i.FiltercolumnDef=e.MBA;break;case"ZzremainBdgt":i.FiltercolumnDef=e.RBA;break;case"statusmessage":i.FiltercolumnDef=e.Status;break;case"ZzrejComments":i.FiltercolumnDef=e.RC}var a=_.map(_.uniq(_.map(i.FiltercolumnDef,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});i.FiltercolumnDef=a}_.forOwn(e.filterCheckedArray,function(e){i.field===e.fieldname&&_.forOwn(i.FiltercolumnDef,function(l){e.checkedarray.indexOf(l.FilterValue)>-1&&(l.IsSelect=!0)})})}),e.gridData.columnDefs=i},e.filterOptionColumn=function(){if(r.detailmode===!1){e.PO=[],e.IN=[],e.ID=[],e.WSD=[],e.WED=[],e.MN=[],e.MName=[],e.RD=[],e.VID=[],e.VTID=[],e.Reviewer=[],e.BON=[],e.DOFOS=[],e.CID=[],e.CName=[],e.PTerms=[],e.BA=[],e.TA=[],e.MBA=[],e.RBA=[],e.Status=[],e.Currency=[],e.RC=[],e.filterCheckedArray=[{fieldname:"Zzebeln",checkedarray:[]},{fieldname:"ZzinvoiceNumber",checkedarray:[]},{fieldname:"ZzinvoiceDate",checkedarray:[]},{fieldname:"ZzbillingStartDate",checkedarray:[]},{fieldname:"ZzbillingEndDate",checkedarray:[]},{fieldname:"ZzlawFirmMatterId",checkedarray:[]},{fieldname:"ZzmatterName",checkedarray:[]},{fieldname:"ZzrecvDate",checkedarray:[]},{fieldname:"ZzvendorName",checkedarray:[]},{fieldname:"ZzlawFirmTaxid",checkedarray:[]},{fieldname:"ZzreviewerName",checkedarray:[]},{fieldname:"ZzbillingOfficeName",checkedarray:[]},{fieldname:"Zzdaysoutstanding",checkedarray:[]},{fieldname:"ZzclientId",checkedarray:[]},{fieldname:"ZzclientidName",checkedarray:[]},{fieldname:"Zterm",checkedarray:[]},{fieldname:"ZzinvoiceTotal",checkedarray:[]},{fieldname:"ZzinvCurrency",checkedarray:[]},{fieldname:"ZztaxAmount",checkedarray:[]},{fieldname:"ZzmatterBudget",checkedarray:[]},{fieldname:"ZzremainBdgt",checkedarray:[]},{fieldname:"statusmessage",checkedarray:[]},{fieldname:"ZzrejComments",checkedarray:[]}],e.dataforFiltering=angular.copy(e.invoicesmasterlistcopy),e.dataforFilteringcopy=angular.copy(e.invoicesmasterlistcopy),_.forOwn(e.dataforFiltering,function(l){null!=l.Zzebeln&&""!=l.Zzebeln&&e.PO.push({FilterValue:l.Zzebeln,filterId:"Zzebeln"}),null!=l.ZzinvoiceNumber&&""!=l.ZzinvoiceNumber&&e.IN.push({FilterValue:l.ZzinvoiceNumber,filterId:"ZzinvoiceNumber"}),null!=l.ZzinvoiceDate&&""!=l.ZzinvoiceDate&&e.ID.push({FilterValue:l.ZzinvoiceDate,filterId:"ZzinvoiceDate"}),null!=l.ZzbillingStartDate&&""!=l.ZzbillingStartDate&&e.WSD.push({FilterValue:l.ZzbillingStartDate,filterId:"ZzbillingStartDate"}),null!=l.ZzbillingEndDate&&""!=l.ZzbillingEndDate&&e.WED.push({FilterValue:l.ZzbillingEndDate,filterId:"ZzbillingEndDate"}),null!=l.ZzlawFirmMatterId&&""!=l.ZzlawFirmMatterId&&e.MN.push({FilterValue:l.ZzlawFirmMatterId,filterId:"ZzlawFirmMatterId"}),null!=l.ZzmatterName&&""!=l.ZzmatterName&&e.MName.push({FilterValue:l.ZzmatterName,filterId:"ZzmatterName"}),null!=l.ZzrecvDate&&""!=l.ZzrecvDate&&e.RD.push({FilterValue:l.ZzrecvDate,filterId:"ZzrecvDate"}),null!=l.ZzvendorName&&""!=l.ZzvendorName&&e.VID.push({FilterValue:l.ZzvendorName,filterId:"ZzvendorName"}),null!=l.ZzlawFirmTaxid&&""!=l.ZzlawFirmTaxid&&e.VTID.push({FilterValue:l.ZzlawFirmTaxid,filterId:"ZzlawFirmTaxid"}),null!=l.ZzreviewerName&&""!=l.ZzreviewerName&&e.Reviewer.push({FilterValue:l.ZzreviewerName,filterId:"ZzreviewerName"}),null!=l.ZzbillingOfficeName&&""!=l.ZzbillingOfficeName&&e.BON.push({FilterValue:l.ZzbillingOfficeName,filterId:"ZzbillingOfficeName"}),null!=l.Zzdaysoutstanding&&""!=l.Zzdaysoutstanding&&e.DOFOS.push({FilterValue:l.Zzdaysoutstanding,filterId:"Zzdaysoutstanding"}),null!=l.ZzclientId&&""!=l.ZzclientId&&e.CID.push({FilterValue:l.ZzclientId,filterId:"ZzclientId"}),null!=l.ZzclientidName&&""!=l.ZzclientidName&&e.CName.push({FilterValue:l.ZzclientidName,filterId:"ZzclientidName"}),null!=l.Zterm&&""!=l.Zterm&&e.PTerms.push({FilterValue:l.Zterm,filterId:"Zterm"}),null!=l.ZzinvoiceTotal&&""!=l.ZzinvoiceTotal&&e.BA.push({FilterValue:l.ZzinvoiceTotal,filterId:"ZzinvoiceTotal"}),null!=l.ZzinvCurrency&&""!=l.ZzinvCurrency&&e.Currency.push({FilterValue:l.ZzinvCurrency,filterId:"ZzinvCurrency"}),null!=l.ZztaxAmount&&""!=l.ZztaxAmount&&e.TA.push({FilterValue:l.ZztaxAmount,filterId:"ZztaxAmount"}),null!=l.ZzmatterBudget&&""!=l.ZzmatterBudget&&e.MBA.push({FilterValue:l.ZzmatterBudget,filterId:"ZzmatterBudget"}),null!=l.ZzremainBdgt&&""!=l.ZzremainBdgt&&e.RBA.push({FilterValue:l.ZzremainBdgt,filterId:"ZzremainBdgt"}),null!=l.statusmessage&&""!=l.statusmessage&&e.Status.push({FilterValue:l.statusmessage,filterId:"statusmessage"}),null!=l.ZzrejComments&&""!=l.ZzrejComments&&e.RC.push({FilterValue:l.ZzrejComments,filterId:"ZzrejComments"})}),e.gridFiltercolumDef=angular.copy(e.gridData.columnDefs);var l=angular.copy(e.gridData.columnDefs);_.forOwn(l,function(l){switch(l.field){case"Zzebeln":e.PO.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvoiceNumber":e.IN.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvoiceDate":e.ID.length&&(l.HaveData=!0),
l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbillingStartDate":e.WSD.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbillingEndDate":e.WED.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlawFirmMatterId":e.MN.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzmatterName":e.MName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzrecvDate":e.RD.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzvendorName":e.VID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlawFirmTaxid":e.VTID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzreviewerName":e.Reviewer.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbillingOfficeName":e.BON.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zzdaysoutstanding":e.DOFOS.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzclientId":e.CID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzclientidName":e.CName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zterm":e.PTerms.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvoiceTotal":e.BA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvCurrency":e.Currency.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztaxAmount":e.TA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzmatterBudget":e.MBA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzremainBdgt":e.RBA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"statusmessage":e.Status.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzrejComments":e.RC.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1}}),e.gridData.columnDefs=l}else{e.LI=[],e.TKID=[],e.TKName=[],e.WDate=[],e.InStatus=[],e.WO=[],e.WOName=[],e.Mphase=[],e.MPhaseName=[],e.BRate=[],e.AgreedRate=[],e.Units=[],e.Amount=[],e.Tax=[],e.Discount=[],e.AgreedDiscount=[],e.Total=[],e.TC=[],e.AC=[],e.AT=[],e.Narrative=[],e.filterCheckedArrayinner=[{fieldname:"ZzbilledRate",checkedarray:[]},{fieldname:"ZzlineItemNumber",checkedarray:[]},{fieldname:"ZztimekeeperId",checkedarray:[]},{fieldname:"ZztimekeeperName",checkedarray:[]},{fieldname:"ZzlineItemDate",checkedarray:[]},{fieldname:"statusmessage",checkedarray:[]},{fieldname:"ZzworkingOffice",checkedarray:[]},{fieldname:"ZzworkingOfficeName",checkedarray:[]},{fieldname:"Zzphase",checkedarray:[]},{fieldname:"ZzphaseName",checkedarray:[]},{fieldname:"ZzbilledRate",checkedarray:[]},{fieldname:"ZzagreedRate",checkedarray:[]},{fieldname:"Units",checkedarray:[]},{fieldname:"Amount",checkedarray:[]},{fieldname:"Tax",checkedarray:[]},{fieldname:"Discount",checkedarray:[]},{fieldname:"AgreedDiscount",checkedarray:[]},{fieldname:"Total",checkedarray:[]},{fieldname:"ZztaskCode",checkedarray:[]},{fieldname:"ZzactivityCode",checkedarray:[]},{fieldname:"Zzlstar",checkedarray:[]},{fieldname:"ZzlineItemDescription",checkedarray:[]}],e.dataforFilteringinnergrid=angular.copy(e.invoicesdetaillistcopy),e.dataforFilteringinnergridcopy=angular.copy(e.invoicesdetaillistcopy),_.forOwn(e.dataforFilteringinnergrid,function(l){null!=l.ZzlineItemNumber&&""!=l.ZzlineItemNumber&&e.LI.push({FilterValue:l.ZzlineItemNumber,filterId:"ZzlineItemNumber"}),null!=l.ZztimekeeperId&&""!=l.ZztimekeeperId&&e.TKID.push({FilterValue:l.ZztimekeeperId,filterId:"ZztimekeeperId"}),null!=l.ZztimekeeperName&&""!=l.ZztimekeeperName&&e.TKName.push({FilterValue:l.ZztimekeeperName,filterId:"ZztimekeeperName"}),null!=l.ZzlineItemDate&&""!=l.ZzlineItemDate&&e.WDate.push({FilterValue:l.ZzlineItemDate,filterId:"ZzlineItemDate"}),null!=l.ZzlineItemDate&&""!=l.ZzlineItemDate&&e.InStatus.push({FilterValue:l.ZzlineItemDate,filterId:"ZzlineItemDate"}),null!=l.ZzlineItemDate&&""!=l.ZzlineItemDate&&e.WO.push({FilterValue:l.ZzlineItemDate,filterId:"ZzlineItemDate"}),null!=l.ZzworkingOfficeName&&""!=l.ZzworkingOfficeName&&e.WOName.push({FilterValue:l.ZzworkingOfficeName,filterId:"ZzworkingOfficeName"}),null!=l.Zzphase&&""!=l.Zzphase&&e.Mphase.push({FilterValue:l.Zzphase,filterId:"Zzphase"}),null!=l.ZzphaseName&&""!=l.ZzphaseName&&e.MPhaseName.push({FilterValue:l.ZzphaseName,filterId:"ZzphaseName"}),null!=l.ZzbilledRate&&""!=l.ZzbilledRate&&e.BRate.push({FilterValue:l.ZzbilledRate,filterId:"ZzbilledRate"}),null!=l.ZzbilledRate&&""!=l.ZzbilledRate&&e.AgreedRate.push({FilterValue:l.ZzbilledRate,filterId:"ZzbilledRate"}),null!=l.Units&&""!=l.Units&&e.Units.push({FilterValue:l.Units,filterId:"Units"}),null!=l.Amount&&""!=l.Amount&&e.Amount.push({FilterValue:l.Amount,filterId:"Amount"}),null!=l.Tax&&""!=l.Tax&&e.Tax.push({FilterValue:l.Tax,filterId:"Tax"}),null!=l.Discount&&""!=l.Discount&&e.Discount.push({FilterValue:l.Discount,filterId:"Discount"}),null!=l.AgreedDiscount&&""!=l.AgreedDiscount&&e.AgreedDiscount.push({FilterValue:l.AgreedDiscount,filterId:"AgreedDiscount"}),null!=l.Total&&""!=l.Total&&e.Total.push({FilterValue:l.Total,filterId:"Total"}),null!=l.ZztaskCode&&""!=l.ZztaskCode&&e.TC.push({FilterValue:l.ZztaskCode,filterId:"ZztaskCode"}),null!=l.ZzactivityCode&&""!=l.ZzactivityCode&&e.AC.push({FilterValue:l.ZzactivityCode,filterId:"ZzactivityCode"}),null!=l.Zzlstar&&""!=l.Zzlstar&&e.AT.push({FilterValue:l.Zzlstar,filterId:"Zzlstar"}),null!=l.ZzlineItemDescription&&""!=l.ZzlineItemDescription&&e.Narrative.push({FilterValue:l.ZzlineItemDescription,filterId:"ZzlineItemDescription"})}),e.gridFiltercolumDefinner=angular.copy(e.gridDetailsData.columnDefs);var t=angular.copy(e.gridDetailsData.columnDefs);_.forOwn(t,function(l){switch(l.field){case"ZzlineItemNumber":e.LI.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztimekeeperId":e.TKID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztimekeeperName":e.TKName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDate":e.WDate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDate":e.InStatus.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDate":e.WO.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzworkingOfficeName":e.WOName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zzphase":e.Mphase.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzphaseName":e.MPhaseName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbilledRate":e.BRate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzagreedRate":e.AgreedRate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Units":e.Units.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Amount":e.Amount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Tax":e.Tax.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Discount":e.Discount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"AgreedDiscount":e.AgreedDiscount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Total":e.Total.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztaskCode":e.TC.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzactivityCode":e.AC.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zzlstar":e.AT.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDescription":e.Narrative.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1}}),e.gridDetailsData.columnDefs=t}},e.popoverclose=function(){$("[data-toggle='popover']").click()},e.chekboxevent=function(l,t,i){i.IsSelect?i.IsSelect=!0:i.IsSelect=!1,_.forOwn(e.filterCheckedArray,function(e){if(e.fieldname==t){var i=e.checkedarray,a=i.indexOf(l);a===-1?e.checkedarray.push(l):e.checkedarray.splice(a,1)}}),e.filterMultipleColumns()},e.checkboxevent=function(l,t,i){i.IsSelect?i.IsSelect=!0:i.IsSelect=!1,_.forOwn(e.filterCheckedArrayinner,function(e){if(e.fieldname==t){var i=e.checkedarray,a=i.indexOf(l);a===-1?e.checkedarray.push(l):e.checkedarray.splice(a,1)}}),e.filterMultipleColumnsinner()},e.filterMultipleColumnsinner=function(){var l=!0,t="",i=[];e.setValinner=!1,e.finalFilterarrayinner=[],e.Filterdatafilinner=angular.copy(e.dataforFilteringinnergridcopy),_.forOwn(e.filterCheckedArrayinner,function(i){i.checkedarray.length&&l&&(t=i.fieldname,_.forOwn(i.checkedarray,function(l){_.forOwn(e.Filterdatafilinner,function(t){l!=t.ZzlineItemNumber&&l!=t.ZztimekeeperId&&l!=t.ZztimekeeperName&&l!=t.ZzlineItemDate&&l!=t.ZzbillingEndDate&&l!=t.ZzlineItemDate&&l!=t.ZzlineItemDate&&l!=t.ZzworkingOfficeName&&l!=t.Zzphase&&l!=t.ZzphaseName&&l!=t.ZzbilledRate&&l!=t.ZzagreedRate&&l!=t.Amount&&l!==t.Units&&l!==t.Tax&&l!==t.Discount&&l!==t.AgreedDiscount&&l!==t.Total&&l!==t.ZztaskCode&&l!==t.ZzactivityCode&&l!==t.ZzlineItemDescription||e.finalFilterarrayinner.push(t)})}),e.setValinner=!0,l=!1)});var a=0;_.forOwn(e.filterCheckedArrayinner,function(l){l.checkedarray.length&&t!=l.fieldname&&_.forOwn(e.finalFilterarrayinner,function(e){_.forOwn(l.checkedarray,function(l){a+=1,l!=e.ZzlineItemNumber&&l!=e.ZztimekeeperId&&l!=e.ZztimekeeperName&&l!=e.ZzlineItemDate&&l!=e.ZzbillingEndDate&&l!=e.ZzlineItemDate&&l!=e.ZzlineItemDate&&l!=e.ZzworkingOfficeName&&l!=e.Zzphase&&l!=e.ZzphaseName&&l!=e.ZzbilledRate&&l!=e.ZzagreedRate&&l!=e.Amount&&l!==e.Units&&l!==e.Tax&&l!==e.Discount&&l!==e.AgreedDiscount&&l!==e.Total&&l!==e.ZztaskCode&&l!==e.ZzactivityCode&&l!==e.ZzlineItemDescription||i.push(e)})})}),0===i.length&&0==a&&(i=e.finalFilterarrayinner);var r=_.map(_.uniq(_.map(i,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});e.setValinner?e.invoicesdetaillistcopy=r:e.invoicesdetaillistcopy=angular.copy(e.dataforFilteringinnergridcopy)},e.filterMultipleColumns=function(){var l=!0,t="",i=[];e.setVal=!1,e.finalFilterarray=[],e.Filterdatafil=angular.copy(e.dataforFilteringcopy),_.forOwn(e.filterCheckedArray,function(i){i.checkedarray.length&&l&&(t=i.fieldname,_.forOwn(i.checkedarray,function(l){_.forOwn(e.Filterdatafil,function(t){l!=t.Zzebeln&&l!=t.ZzinvoiceNumber&&l!=t.ZzinvoiceDate&&l!=t.ZzbillingStartDate&&l!=t.ZzbillingEndDate&&l!=t.ZzlawFirmMatterId&&l!=t.ZzmatterName&&l!=t.ZzrecvDate&&l!=t.ZzvendorName&&l!=t.ZzlawFirmTaxid&&l!=t.ZzreviewerName&&l!=t.ZzbillingOfficeName&&l!=t.Zzdaysoutstanding&&l!=t.ZzclientId&&l!==t.ZzclientidName&&l!==t.Zterm&&l!==t.ZzinvoiceTotal&&l!==t.ZzinvCurrency&&l!==t.ZztaxAmount&&l!==t.ZzmatterBudget&&l!==t.ZzremainBdgt&&l!==t.statusmessage&&l!==t.ZzrejComments||e.finalFilterarray.push(t)})}),e.setVal=!0,l=!1)});var a=0;_.forOwn(e.filterCheckedArray,function(l){l.checkedarray.length&&t!=l.fieldname&&_.forOwn(e.finalFilterarray,function(e){_.forOwn(l.checkedarray,function(l){a+=1,l!=e.Zzebeln&&l!=e.ZzinvoiceNumber&&l!=e.ZzinvoiceDate&&l!=e.ZzbillingStartDate&&l!=e.ZzbillingEndDate&&l!=e.ZzlawFirmMatterId&&l!=e.ZzmatterName&&l!=e.ZzrecvDate&&l!=e.ZzvendorName&&l!=e.ZzlawFirmTaxid&&l!=e.ZzreviewerName&&l!=e.ZzbillingOfficeName&&l!=e.Zzdaysoutstanding&&l!=e.ZzclientId&&l!==e.ZzclientidName&&l!==e.Zterm&&l!==e.ZzinvoiceTotal&&l!==e.ZzinvCurrency&&l!==e.ZztaxAmount&&l!==e.ZzmatterBudget&&l!==e.ZzremainBdgt&&l!==e.statusmessage&&l!==e.ZzrejComments||i.push(e)})})}),0===i.length&&0==a&&(i=e.finalFilterarray);var r=_.map(_.uniq(_.map(i,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});e.setVal?e.invoicesmasterlistcopy=r:e.invoicesmasterlistcopy=angular.copy(e.dataforFilteringcopy)},e.isacceptenable=function(){var l=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});return l.length>0},e.handleFile=function(l){var l=document.getElementById("xlf");e.$apply(function(e){var t=l.files[0],i=new FileReader,a=t.name;xlf.value;i.onload=function(e){p(a,t)},i.readAsBinaryString(t),xlf.value=""})},e.handleAttachFile=function(l){var t=document.getElementById("xlfAttach");e.$apply(function(e){var l=t.files[0],i=new FileReader,a=l.name;xlfAttach.value;i.onload=function(e){C(a,l)},i.readAsBinaryString(l),xlfAttach.value=""})},e.showcomments=y,e.showhideinner=function(l,t){var i=angular.copy(e.gridDetailsData.columnDefs);_.forOwn(i,function(i){if(i.field===l&&i.name==t)if(i.showhide)i.showhide=!1;else{switch(i.showhide=!0,i.field){case"ZzlineItemNumber":i.FiltercolumnDef=e.LI;break;case"ZztimekeeperId":i.FiltercolumnDef=e.TKID;break;case"ZztimekeeperName":i.FiltercolumnDef=e.TKName;break;case"ZzlineItemDate":i.FiltercolumnDef=e.WDate;break;case"ZzbillingEndDate":i.FiltercolumnDef=e.WED;break;case"ZzlineItemDate":i.FiltercolumnDef=e.InStatus;break;case"ZzlineItemDate":i.FiltercolumnDef=e.WO;break;case"ZzworkingOfficeName":i.FiltercolumnDef=e.WOName;break;case"Zzphase":i.FiltercolumnDef=e.Mphase;break;case"ZzphaseName":i.FiltercolumnDef=e.MPhaseName;break;case"ZzbilledRate":i.FiltercolumnDef=e.BRate;break;case"ZzagreedRate":i.FiltercolumnDef=e.AgreedRate;break;case"Units":i.FiltercolumnDef=e.Units;break;case"Amount":i.FiltercolumnDef=e.Amount;break;case"Tax":i.FiltercolumnDef=e.Tax;break;case"Discount":i.FiltercolumnDef=e.Discount;break;case"AgreedDiscount":i.FiltercolumnDef=e.AgreedDiscount;break;case"Total":i.FiltercolumnDef=e.Total;break;case"ZztaskCode":i.FiltercolumnDef=e.TC;break;case"ZzactivityCode":i.FiltercolumnDef=e.AC;break;case"ZzlineItemDescription":i.FiltercolumnDef=e.Narrative}var a=_.map(_.uniq(_.map(i.FiltercolumnDef,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});i.FiltercolumnDef=a}_.forOwn(e.filterCheckedArrayinner,function(e){i.field===e.fieldname&&_.forOwn(i.FiltercolumnDef,function(l){e.checkedarray.indexOf(l.FilterValue)>-1&&(l.IsSelect=!0)})})}),e.gridDetailsData.columnDefs=i},e.showhide=function(l,t){var i=angular.copy(e.gridData.columnDefs);_.forOwn(i,function(i){if(i.field===l&&i.name==t)if(i.showhide)i.showhide=!1;else{switch(i.showhide=!0,i.field){case"Zzebeln":i.FiltercolumnDef=e.PO;break;case"ZzinvoiceNumber":i.FiltercolumnDef=e.IN;break;case"ZzinvoiceDate":i.FiltercolumnDef=e.ID;break;case"ZzbillingStartDate":i.FiltercolumnDef=e.WSD;break;case"ZzbillingEndDate":i.FiltercolumnDef=e.WED;break;case"ZzlawFirmMatterId":i.FiltercolumnDef=e.MN;break;case"ZzmatterName":i.FiltercolumnDef=e.MName;break;case"ZzrecvDate":i.FiltercolumnDef=e.RD;break;case"ZzvendorName":i.FiltercolumnDef=e.VID;break;case"ZzlawFirmTaxid":i.FiltercolumnDef=e.VTID;break;case"ZzreviewerName":i.FiltercolumnDef=e.Reviewer;break;case"ZzbillingOfficeName":i.FiltercolumnDef=e.BON;break;case"Zzdaysoutstanding":i.FiltercolumnDef=e.DOFOS;break;case"ZzclientId":i.FiltercolumnDef=e.CID;break;case"ZzclientidName":i.FiltercolumnDef=e.CName;break;case"Zterm":i.FiltercolumnDef=e.PTerms;break;case"ZzinvoiceTotal":i.FiltercolumnDef=e.BA;break;case"ZzinvCurrency":i.FiltercolumnDef=e.Currency;break;case"ZztaxAmount":i.FiltercolumnDef=e.TA;break;case"ZzmatterBudget":i.FiltercolumnDef=e.MBA;break;case"ZzremainBdgt":i.FiltercolumnDef=e.RBA;break;case"statusmessage":i.FiltercolumnDef=e.Status;break;case"ZzrejComments":i.FiltercolumnDef=e.RC}var a=_.map(_.uniq(_.map(i.FiltercolumnDef,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});i.FiltercolumnDef=a}_.forOwn(e.filterCheckedArray,function(e){i.field===e.fieldname&&_.forOwn(i.FiltercolumnDef,function(l){e.checkedarray.indexOf(l.FilterValue)>-1&&(l.IsSelect=!0)})})}),e.gridData.columnDefs=i},e.filterOptionColumn=function(){if(r.detailmode===!1){e.PO=[],e.IN=[],e.ID=[],e.WSD=[],e.WED=[],e.MN=[],e.MName=[],e.RD=[],e.VID=[],e.VTID=[],e.Reviewer=[],e.BON=[],e.DOFOS=[],e.CID=[],e.CName=[],e.PTerms=[],e.BA=[],e.TA=[],e.MBA=[],e.RBA=[],e.Status=[],e.Currency=[],e.RC=[],e.filterCheckedArray=[{fieldname:"Zzebeln",checkedarray:[]},{fieldname:"ZzinvoiceNumber",checkedarray:[]},{fieldname:"ZzinvoiceDate",checkedarray:[]},{fieldname:"ZzbillingStartDate",checkedarray:[]},{fieldname:"ZzbillingEndDate",checkedarray:[]},{fieldname:"ZzlawFirmMatterId",checkedarray:[]},{fieldname:"ZzmatterName",checkedarray:[]},{fieldname:"ZzrecvDate",checkedarray:[]},{fieldname:"ZzvendorName",checkedarray:[]},{fieldname:"ZzlawFirmTaxid",checkedarray:[]},{fieldname:"ZzreviewerName",checkedarray:[]},{fieldname:"ZzbillingOfficeName",checkedarray:[]},{fieldname:"Zzdaysoutstanding",checkedarray:[]},{fieldname:"ZzclientId",checkedarray:[]},{fieldname:"ZzclientidName",checkedarray:[]},{fieldname:"Zterm",checkedarray:[]},{fieldname:"ZzinvoiceTotal",checkedarray:[]},{fieldname:"ZzinvCurrency",checkedarray:[]},{fieldname:"ZztaxAmount",checkedarray:[]},{fieldname:"ZzmatterBudget",checkedarray:[]},{fieldname:"ZzremainBdgt",checkedarray:[]},{fieldname:"statusmessage",checkedarray:[]},{fieldname:"ZzrejComments",checkedarray:[]}],e.dataforFiltering=angular.copy(e.invoicesmasterlistcopy),e.dataforFilteringcopy=angular.copy(e.invoicesmasterlistcopy),_.forOwn(e.dataforFiltering,function(l){null!=l.Zzebeln&&""!=l.Zzebeln&&e.PO.push({FilterValue:l.Zzebeln,filterId:"Zzebeln"}),null!=l.ZzinvoiceNumber&&""!=l.ZzinvoiceNumber&&e.IN.push({FilterValue:l.ZzinvoiceNumber,filterId:"ZzinvoiceNumber"}),null!=l.ZzinvoiceDate&&""!=l.ZzinvoiceDate&&e.ID.push({FilterValue:l.ZzinvoiceDate,filterId:"ZzinvoiceDate"}),null!=l.ZzbillingStartDate&&""!=l.ZzbillingStartDate&&e.WSD.push({FilterValue:l.ZzbillingStartDate,filterId:"ZzbillingStartDate"}),null!=l.ZzbillingEndDate&&""!=l.ZzbillingEndDate&&e.WED.push({FilterValue:l.ZzbillingEndDate,filterId:"ZzbillingEndDate"}),null!=l.ZzlawFirmMatterId&&""!=l.ZzlawFirmMatterId&&e.MN.push({FilterValue:l.ZzlawFirmMatterId,filterId:"ZzlawFirmMatterId"}),null!=l.ZzmatterName&&""!=l.ZzmatterName&&e.MName.push({FilterValue:l.ZzmatterName,filterId:"ZzmatterName"}),null!=l.ZzrecvDate&&""!=l.ZzrecvDate&&e.RD.push({FilterValue:l.ZzrecvDate,filterId:"ZzrecvDate"}),null!=l.ZzvendorName&&""!=l.ZzvendorName&&e.VID.push({FilterValue:l.ZzvendorName,filterId:"ZzvendorName"}),null!=l.ZzlawFirmTaxid&&""!=l.ZzlawFirmTaxid&&e.VTID.push({FilterValue:l.ZzlawFirmTaxid,filterId:"ZzlawFirmTaxid"}),null!=l.ZzreviewerName&&""!=l.ZzreviewerName&&e.Reviewer.push({FilterValue:l.ZzreviewerName,filterId:"ZzreviewerName"}),null!=l.ZzbillingOfficeName&&""!=l.ZzbillingOfficeName&&e.BON.push({FilterValue:l.ZzbillingOfficeName,filterId:"ZzbillingOfficeName"}),null!=l.Zzdaysoutstanding&&""!=l.Zzdaysoutstanding&&e.DOFOS.push({FilterValue:l.Zzdaysoutstanding,filterId:"Zzdaysoutstanding"}),null!=l.ZzclientId&&""!=l.ZzclientId&&e.CID.push({FilterValue:l.ZzclientId,filterId:"ZzclientId"}),null!=l.ZzclientidName&&""!=l.ZzclientidName&&e.CName.push({FilterValue:l.ZzclientidName,filterId:"ZzclientidName"}),null!=l.Zterm&&""!=l.Zterm&&e.PTerms.push({FilterValue:l.Zterm,filterId:"Zterm"}),null!=l.ZzinvoiceTotal&&""!=l.ZzinvoiceTotal&&e.BA.push({FilterValue:l.ZzinvoiceTotal,filterId:"ZzinvoiceTotal"}),null!=l.ZzinvCurrency&&""!=l.ZzinvCurrency&&e.Currency.push({FilterValue:l.ZzinvCurrency,filterId:"ZzinvCurrency"}),null!=l.ZztaxAmount&&""!=l.ZztaxAmount&&e.TA.push({FilterValue:l.ZztaxAmount,filterId:"ZztaxAmount"}),null!=l.ZzmatterBudget&&""!=l.ZzmatterBudget&&e.MBA.push({FilterValue:l.ZzmatterBudget,filterId:"ZzmatterBudget"}),null!=l.ZzremainBdgt&&""!=l.ZzremainBdgt&&e.RBA.push({FilterValue:l.ZzremainBdgt,filterId:"ZzremainBdgt"}),null!=l.statusmessage&&""!=l.statusmessage&&e.Status.push({FilterValue:l.statusmessage,filterId:"statusmessage"}),null!=l.ZzrejComments&&""!=l.ZzrejComments&&e.RC.push({FilterValue:l.ZzrejComments,filterId:"ZzrejComments"})}),e.gridFiltercolumDef=angular.copy(e.gridData.columnDefs);var l=angular.copy(e.gridData.columnDefs);_.forOwn(l,function(l){switch(l.field){case"Zzebeln":e.PO.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvoiceNumber":e.IN.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvoiceDate":e.ID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbillingStartDate":e.WSD.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbillingEndDate":e.WED.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlawFirmMatterId":e.MN.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzmatterName":e.MName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzrecvDate":e.RD.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzvendorName":e.VID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlawFirmTaxid":e.VTID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzreviewerName":e.Reviewer.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbillingOfficeName":e.BON.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zzdaysoutstanding":e.DOFOS.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzclientId":e.CID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzclientidName":e.CName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zterm":e.PTerms.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvoiceTotal":e.BA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzinvCurrency":e.Currency.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztaxAmount":e.TA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzmatterBudget":e.MBA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzremainBdgt":e.RBA.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"statusmessage":e.Status.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzrejComments":e.RC.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1}}),e.gridData.columnDefs=l}else{e.LI=[],e.TKID=[],e.TKName=[],e.WDate=[],e.InStatus=[],e.WO=[],e.WOName=[],e.Mphase=[],e.MPhaseName=[],e.BRate=[],e.AgreedRate=[],e.Units=[],e.Amount=[],e.Tax=[],e.Discount=[],e.AgreedDiscount=[],e.Total=[],e.TC=[],e.AC=[],e.AT=[],e.Narrative=[],e.filterCheckedArrayinner=[{fieldname:"ZzbilledRate",checkedarray:[]},{fieldname:"ZzlineItemNumber",checkedarray:[]},{fieldname:"ZztimekeeperId",checkedarray:[]},{fieldname:"ZztimekeeperName",checkedarray:[]},{fieldname:"ZzlineItemDate",checkedarray:[]},{fieldname:"statusmessage",checkedarray:[]},{fieldname:"ZzworkingOffice",checkedarray:[]},{fieldname:"ZzworkingOfficeName",checkedarray:[]},{fieldname:"Zzphase",checkedarray:[]},{fieldname:"ZzphaseName",checkedarray:[]},{fieldname:"ZzbilledRate",checkedarray:[]},{fieldname:"ZzagreedRate",checkedarray:[]},{fieldname:"Units",checkedarray:[]},{fieldname:"Amount",checkedarray:[]},{fieldname:"Tax",checkedarray:[]},{fieldname:"Discount",checkedarray:[]},{fieldname:"AgreedDiscount",checkedarray:[]},{fieldname:"Total",checkedarray:[]},{fieldname:"ZztaskCode",checkedarray:[]},{fieldname:"ZzactivityCode",checkedarray:[]},{fieldname:"Zzlstar",checkedarray:[]},{fieldname:"ZzlineItemDescription",checkedarray:[]}],e.dataforFilteringinnergrid=angular.copy(e.invoicesdetaillistcopy),e.dataforFilteringinnergridcopy=angular.copy(e.invoicesdetaillistcopy),_.forOwn(e.dataforFilteringinnergrid,function(l){null!=l.ZzlineItemNumber&&""!=l.ZzlineItemNumber&&e.LI.push({FilterValue:l.ZzlineItemNumber,filterId:"ZzlineItemNumber"}),null!=l.ZztimekeeperId&&""!=l.ZztimekeeperId&&e.TKID.push({FilterValue:l.ZztimekeeperId,filterId:"ZztimekeeperId"}),null!=l.ZztimekeeperName&&""!=l.ZztimekeeperName&&e.TKName.push({FilterValue:l.ZztimekeeperName,filterId:"ZztimekeeperName"}),null!=l.ZzlineItemDate&&""!=l.ZzlineItemDate&&e.WDate.push({FilterValue:l.ZzlineItemDate,filterId:"ZzlineItemDate"}),null!=l.ZzlineItemDate&&""!=l.ZzlineItemDate&&e.InStatus.push({FilterValue:l.ZzlineItemDate,filterId:"ZzlineItemDate"}),null!=l.ZzlineItemDate&&""!=l.ZzlineItemDate&&e.WO.push({FilterValue:l.ZzlineItemDate,filterId:"ZzlineItemDate"}),null!=l.ZzworkingOfficeName&&""!=l.ZzworkingOfficeName&&e.WOName.push({FilterValue:l.ZzworkingOfficeName,filterId:"ZzworkingOfficeName"}),null!=l.Zzphase&&""!=l.Zzphase&&e.Mphase.push({FilterValue:l.Zzphase,filterId:"Zzphase"}),null!=l.ZzphaseName&&""!=l.ZzphaseName&&e.MPhaseName.push({FilterValue:l.ZzphaseName,filterId:"ZzphaseName"}),null!=l.ZzbilledRate&&""!=l.ZzbilledRate&&e.BRate.push({FilterValue:l.ZzbilledRate,filterId:"ZzbilledRate"}),null!=l.ZzbilledRate&&""!=l.ZzbilledRate&&e.AgreedRate.push({FilterValue:l.ZzbilledRate,filterId:"ZzbilledRate"}),null!=l.Units&&""!=l.Units&&e.Units.push({FilterValue:l.Units,filterId:"Units"}),null!=l.Amount&&""!=l.Amount&&e.Amount.push({FilterValue:l.Amount,filterId:"Amount"}),null!=l.Tax&&""!=l.Tax&&e.Tax.push({FilterValue:l.Tax,filterId:"Tax"}),null!=l.Discount&&""!=l.Discount&&e.Discount.push({FilterValue:l.Discount,filterId:"Discount"}),null!=l.AgreedDiscount&&""!=l.AgreedDiscount&&e.AgreedDiscount.push({FilterValue:l.AgreedDiscount,filterId:"AgreedDiscount"}),null!=l.Total&&""!=l.Total&&e.Total.push({FilterValue:l.Total,filterId:"Total"}),null!=l.ZztaskCode&&""!=l.ZztaskCode&&e.TC.push({FilterValue:l.ZztaskCode,filterId:"ZztaskCode"}),null!=l.ZzactivityCode&&""!=l.ZzactivityCode&&e.AC.push({FilterValue:l.ZzactivityCode,filterId:"ZzactivityCode"}),null!=l.Zzlstar&&""!=l.Zzlstar&&e.AT.push({FilterValue:l.Zzlstar,filterId:"Zzlstar"}),null!=l.ZzlineItemDescription&&""!=l.ZzlineItemDescription&&e.Narrative.push({FilterValue:l.ZzlineItemDescription,filterId:"ZzlineItemDescription"})}),e.gridFiltercolumDefinner=angular.copy(e.gridDetailsData.columnDefs);var t=angular.copy(e.gridDetailsData.columnDefs);_.forOwn(t,function(l){switch(l.field){case"ZzlineItemNumber":e.LI.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztimekeeperId":e.TKID.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztimekeeperName":e.TKName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDate":e.WDate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDate":e.InStatus.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDate":e.WO.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzworkingOfficeName":e.WOName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zzphase":e.Mphase.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzphaseName":e.MPhaseName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzbilledRate":e.BRate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzagreedRate":e.AgreedRate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Units":e.Units.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Amount":e.Amount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Tax":e.Tax.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Discount":e.Discount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"AgreedDiscount":e.AgreedDiscount.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Total":e.Total.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZztaskCode":e.TC.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzactivityCode":e.AC.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Zzlstar":e.AT.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"ZzlineItemDescription":e.Narrative.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1}}),e.gridDetailsData.columnDefs=t}},e.chekboxevent=function(l,t,i){i.IsSelect?i.IsSelect=!0:i.IsSelect=!1,_.forOwn(e.filterCheckedArray,function(e){if(e.fieldname==t){var i=e.checkedarray,a=i.indexOf(l);a===-1?e.checkedarray.push(l):e.checkedarray.splice(a,1)}}),e.filterMultipleColumns()},e.checkboxevent=function(l,t,i){i.IsSelect?i.IsSelect=!0:i.IsSelect=!1,_.forOwn(e.filterCheckedArrayinner,function(e){if(e.fieldname==t){var i=e.checkedarray,a=i.indexOf(l);a===-1?e.checkedarray.push(l):e.checkedarray.splice(a,1)}}),e.filterMultipleColumnsinner()},e.filterMultipleColumnsinner=function(){var l=!0,t="",i=[];e.setValinner=!1,e.finalFilterarrayinner=[],e.Filterdatafilinner=angular.copy(e.dataforFilteringinnergridcopy),_.forOwn(e.filterCheckedArrayinner,function(i){i.checkedarray.length&&l&&(t=i.fieldname,_.forOwn(i.checkedarray,function(l){_.forOwn(e.Filterdatafilinner,function(t){l!=t.ZzlineItemNumber&&l!=t.ZztimekeeperId&&l!=t.ZztimekeeperName&&l!=t.ZzlineItemDate&&l!=t.ZzbillingEndDate&&l!=t.ZzlineItemDate&&l!=t.ZzlineItemDate&&l!=t.ZzworkingOfficeName&&l!=t.Zzphase&&l!=t.ZzphaseName&&l!=t.ZzbilledRate&&l!=t.ZzagreedRate&&l!=t.Amount&&l!==t.Units&&l!==t.Tax&&l!==t.Discount&&l!==t.AgreedDiscount&&l!==t.Total&&l!==t.ZztaskCode&&l!==t.ZzactivityCode&&l!==t.ZzlineItemDescription||e.finalFilterarrayinner.push(t)})}),e.setValinner=!0,l=!1)});var a=0;_.forOwn(e.filterCheckedArrayinner,function(l){l.checkedarray.length&&t!=l.fieldname&&_.forOwn(e.finalFilterarrayinner,function(e){_.forOwn(l.checkedarray,function(l){a+=1,l!=e.ZzlineItemNumber&&l!=e.ZztimekeeperId&&l!=e.ZztimekeeperName&&l!=e.ZzlineItemDate&&l!=e.ZzbillingEndDate&&l!=e.ZzlineItemDate&&l!=e.ZzlineItemDate&&l!=e.ZzworkingOfficeName&&l!=e.Zzphase&&l!=e.ZzphaseName&&l!=e.ZzbilledRate&&l!=e.ZzagreedRate&&l!=e.Amount&&l!==e.Units&&l!==e.Tax&&l!==e.Discount&&l!==e.AgreedDiscount&&l!==e.Total&&l!==e.ZztaskCode&&l!==e.ZzactivityCode&&l!==e.ZzlineItemDescription||i.push(e)})})}),0===i.length&&0==a&&(i=e.finalFilterarrayinner);var r=_.map(_.uniq(_.map(i,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});e.setValinner?e.invoicesdetaillistcopy=r:e.invoicesdetaillistcopy=angular.copy(e.dataforFilteringinnergridcopy)},e.filterMultipleColumns=function(){var l=!0,t="",i=[];e.setVal=!1,e.finalFilterarray=[],e.Filterdatafil=angular.copy(e.dataforFilteringcopy),_.forOwn(e.filterCheckedArray,function(i){i.checkedarray.length&&l&&(t=i.fieldname,_.forOwn(i.checkedarray,function(l){_.forOwn(e.Filterdatafil,function(t){l!=t.Zzebeln&&l!=t.ZzinvoiceNumber&&l!=t.ZzinvoiceDate&&l!=t.ZzbillingStartDate&&l!=t.ZzbillingEndDate&&l!=t.ZzlawFirmMatterId&&l!=t.ZzmatterName&&l!=t.ZzrecvDate&&l!=t.ZzvendorName&&l!=t.ZzlawFirmTaxid&&l!=t.ZzreviewerName&&l!=t.ZzbillingOfficeName&&l!=t.Zzdaysoutstanding&&l!=t.ZzclientId&&l!==t.ZzclientidName&&l!==t.Zterm&&l!==t.ZzinvoiceTotal&&l!==t.ZzinvCurrency&&l!==t.ZztaxAmount&&l!==t.ZzmatterBudget&&l!==t.ZzremainBdgt&&l!==t.statusmessage&&l!==t.ZzrejComments||e.finalFilterarray.push(t)})}),e.setVal=!0,l=!1)});var a=0;_.forOwn(e.filterCheckedArray,function(l){l.checkedarray.length&&t!=l.fieldname&&_.forOwn(e.finalFilterarray,function(e){_.forOwn(l.checkedarray,function(l){a+=1,l!=e.Zzebeln&&l!=e.ZzinvoiceNumber&&l!=e.ZzinvoiceDate&&l!=e.ZzbillingStartDate&&l!=e.ZzbillingEndDate&&l!=e.ZzlawFirmMatterId&&l!=e.ZzmatterName&&l!=e.ZzrecvDate&&l!=e.ZzvendorName&&l!=e.ZzlawFirmTaxid&&l!=e.ZzreviewerName&&l!=e.ZzbillingOfficeName&&l!=e.Zzdaysoutstanding&&l!=e.ZzclientId&&l!==e.ZzclientidName&&l!==e.Zterm&&l!==e.ZzinvoiceTotal&&l!==e.ZzinvCurrency&&l!==e.ZztaxAmount&&l!==e.ZzmatterBudget&&l!==e.ZzremainBdgt&&l!==e.statusmessage&&l!==e.ZzrejComments||i.push(e)})})}),0===i.length&&0==a&&(i=e.finalFilterarray);var r=_.map(_.uniq(_.map(i,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});e.setVal?e.invoicesmasterlistcopy=r:e.invoicesmasterlistcopy=angular.copy(e.dataforFilteringcopy)},e.filterRemoveItem=function(l,t){_.forOwn(e.filterCheckedArray,function(i){if(i.fieldname===t){var a=i.checkedarray,r=a.indexOf(l);if(r!=-1){i.checkedarray.splice(r,1);var n=angular.copy(e.gridData.columnDefs);_.forOwn(n,function(e){e.FiltercolumnDef&&_.forOwn(e.FiltercolumnDef,function(e){l==e.FilterValue&&(e.IsSelect=!1)})}),e.gridData.columnDefs=n,e.filterMultipleColumns()}}})},e.filterRemoveIteminner=function(l,t){_.forOwn(e.filterCheckedArrayinner,function(i){
if(i.fieldname===t){var a=i.checkedarray,r=a.indexOf(l);if(r!=-1){i.checkedarray.splice(r,1);var n=angular.copy(e.gridDetailsData.columnDefs);_.forOwn(n,function(e){e.FiltercolumnDef&&_.forOwn(e.FiltercolumnDef,function(e){l==e.FilterValue&&(e.IsSelect=!1)})}),e.gridDetailsData.columnDefs=n,e.filterMultipleColumnsinner()}}})}}angular.module("lglsystem").controller("mainController",e),e.$inject=["$scope","$filter","invoiceService","$modal","$timeout","lglsystemData","jrconstants","$mdDialog","$http"]}(),function(){"use strict";function e(e,l,t,i,a,r){function n(){e.getCurrencygroup().then(function(e){e&&(l.matterDetaildata=e.d.results,console.log("$scope.matterDetaildata ",l.matterDetaildata))})}function s(){e.getZprsShWerksSet().then(function(e){e&&(l.matterDetaildata=e.d.results)})}function d(){e.getMatters().then(function(e){e&&(l.matterDetaildata=e.d.results)})}function o(){e.getCounVendorSet().then(function(e){e&&(l.matterDetaildata=e.d.results)})}function c(){"reporting"===l.filtertype&&n(),"store"===l.filtertype&&s(),"matter"===l.filtertype&&d(),"vendor"===l.filtertype&&o()}l.filtertype=r.filtertype,l.matterDetaildata=[],l.selecteditem=function(e){i.close(e)},l.cancel=function(){i.dismiss("cancel")},c()}angular.module("lglsystem").controller("mattergroupselectController",e),e.$inject=["invoiceService","$scope","$filter","$modalInstance","$modal","lglsystemData"]}(),function(){"use strict";function e(e,l,t,i,a,r,n){function s(l){i.filtertype=l;var a=t.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/mattergroupselect.html",size:"sm",bindToController:!0,controller:"mattergroupselectController"});a.result.then(function(l){"store"===i.filtertype&&(e.Item.StoreNo=l),"matter"===i.filtertype&&(e.Item.Pspid=l),"vendor"===i.filtertype&&(e.Item.parnrz3=l)})}e.Items=[],e.checkboxmodel={},e.checkboxmodel.General=!0,e.checkboxmodel.Lawsuit=!0,e.checkboxmodel.DemandOffers=!0,e.checkboxmodel.FinalResolution=!0,e.checkboxmodel.Narrative=!0,e.budjetmasterlistcopy=[],e.Item={},e.gridData={enableSorting:!0,enableColumnResizing:!0,enableGridMenu:!1,data:"budjetmasterlistcopy",columnDefs:[{name:"Matter Number",field:"Pspid",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Matter Description",field:"Post1",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Status",field:"Status",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"CMI Record Number",field:"CmiRec",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Store Number",field:"StoreNo",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Case Type",field:"CaseType",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Secondary Case Type",field:"CaseTypeSec",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Matter Type",field:"MatterType",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Matter Sub Type",field:"MatterSubtype",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Practice Area",field:"PracticeArea",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Matter Currency",field:"MatterCuky",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Open Date",field:"OpenDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.OpenDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Close Date",field:"CloseDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.CloseDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Court Name",field:"Court",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Facility Number",field:"Facility",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Primary Issues",field:"PrimaryIssues",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Secondary Issues",field:"SecondaryIssues",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"State",field:"State",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Country",field:"County",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Trial Date",field:"TrialDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.TrialDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Settlement Date",field:"SettlementDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.SettlementDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Conference Date",field:"ConferenceDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ConferenceDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Mediation Date",field:"MediationDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.MediationDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Current Offer",field:"CurrentOffer",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Authorzation Amount",field:"AuthorizationAmount",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Demand Amount",field:"DemandAmount",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Outcome",field:"Outcome",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Outcome Sub-Type",field:"OutcomeSub",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Resolution Date",field:"ResolutionDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.ResolutionDate| dateFilter | date:'MM/dd/yyyy'}}</div>"},{name:"Total Resolution Amount",field:"TotResAmt",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Final Resolution Amount",field:"FinResAmt",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Payer",field:"Payer",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Payment Amount",field:"PaymentAmount",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100},{name:"Payment Date",field:"PaymentDate",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.PaymentDate| dateFilter | date:'MM/dd/yyyy'}}</div>",width:100},{name:"Narrative",field:"Narrative_line",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:100}],plugins:[new ngGridFlexibleHeightPlugin],onRegisterApi:function(l){e.gridApi=l}},e.Item.StoreNo="",e.Item.Pspid="",e.Item.parnrz3="",e.getInvoiceDetails=function(){var l=[],t=[],i=[];""!=e.Item.StoreNo&&l.push({field:"StoreNo",search:e.Item.StoreNo,search1:"",type:"equal",filtertype:"include",isand:!0}),""!=e.Item.Pspid&&l.push({field:"Pspid",search:e.Item.Pspid,search1:"",type:"equal",filtertype:"include",isand:!0}),""!=e.Item.parnrz3&&l.push({field:"ParnrZ3",search:e.Item.parnrz3,search1:"",type:"equal",filtertype:"include",isand:!0}),_.each(l,function(e){switch(e.type){case"equal":e.isand?t.push({filteredQuery:"("+e.field+" eq '"+e.search+"')",operator:"and"}):t.push({filteredQuery:"("+e.field+" eq '"+e.search+"')",operator:"or"}),console.log(t);break;case"contains":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"substringof('"+e.search+"',"+e.field+")",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:" not substringof('"+e.search+"',"+e.field+")",operator:"and"});break;case"startswith":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"startswith("+e.field+",'"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:" not startswith("+e.field+",'"+e.search+"')",operator:"and"});break;case"endswith":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"endswith("+e.field+",'"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:" not endswith("+e.field+",'"+e.search+"')",operator:"and"});break;case"between":_.isUndefined(e.isDate)?e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"(("+e.field+" ge '"+e.search+"') and ("+e.field+" le '"+e.search1+"'))",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:"(not("+e.field+" ge '"+e.search+"') and ("+e.field+" le '"+e.search1+"'))",operator:"and"}):e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"(("+e.field+" ge datetime'"+e.search+"') and ("+e.field+" le datetime'"+e.search1+"'))",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:"(not("+e.field+" ge datetime'"+e.search+"') and ("+e.field+" le datetime'"+e.search1+"'))",operator:"and"});break;case"lessthan":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"("+e.field+" lt '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:"not ("+e.field+" lt '"+e.search+"')",operator:"and"});break;case"lessthanequalto":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"("+e.field+" le '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:"not ("+e.field+" le '"+e.search+"')",operator:"and"});break;case"greaterthan":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"("+e.field+" gt '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:"not ("+e.field+" gt '"+e.search+"')",operator:"and"});break;case"greaterthanequalto":e.filtertype&&"exclude"!==e.filtertype?t.push({filteredQuery:"("+e.field+" ge '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&i.push({filteredQueryExclude:"not ("+e.field+" ge '"+e.search+"')",operator:"and"})}}),a.getmattersummaryreport(t,"").then(function(l){l&&(e.budjetmasterlist=l.d.results,e.budjetmasterlistcopy=angular.copy(e.budjetmasterlist))})},e.enabledisable=function(l){e.gridData.columnDefs[5].visible=e.checkboxmodel.General,e.gridData.columnDefs[6].visible=e.checkboxmodel.General,e.gridData.columnDefs[7].visible=e.checkboxmodel.General,e.gridData.columnDefs[8].visible=e.checkboxmodel.General,e.gridData.columnDefs[9].visible=e.checkboxmodel.General,e.gridData.columnDefs[10].visible=e.checkboxmodel.General,e.gridData.columnDefs[11].visible=e.checkboxmodel.General,e.gridData.columnDefs[12].visible=e.checkboxmodel.General,e.gridData.columnDefs[13].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[14].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[15].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[16].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[17].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[18].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[19].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[20].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[21].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[22].visible=e.checkboxmodel.Lawsuit,e.gridData.columnDefs[23].visible=e.checkboxmodel.DemandOffers,e.gridData.columnDefs[24].visible=e.checkboxmodel.DemandOffers,e.gridData.columnDefs[25].visible=e.checkboxmodel.DemandOffers,e.gridData.columnDefs[26].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[27].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[28].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[29].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[30].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[31].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[32].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[33].visible=e.checkboxmodel.FinalResolution,e.gridData.columnDefs[34].visible=e.checkboxmodel.Narrative,e.gridApi.core.notifyDataChange(n.dataChange.COLUMN)},e.showFormModalMatterGroup=s}angular.module("lglsystem").controller("mattersummeryController",e),e.$inject=["$scope","$filter","$modal","lglsystemData","invoiceService","jrconstants","uiGridConstants"]}(),function(){"use strict";function e(e,l,t,i,a,r,n){function s(){e.filtergridtype=r.gridtype,e.paymentmode=r.paymentmode,e.paymode=r.paymode}function d(e){r.gridtype=e,l.path("/main")}function o(l){r.paymentmode=l,"pay"==l?(e.paymode=!0,r.paymode=e.paymode):(e.paymode=!1,r.paymode=e.paymode)}e.invoicesmasterlist=[],e.pendingcount=0,e.approvedcount=0,e.rejectedcount=0,e.reviewcount=0,e.holdcount=0,e.paidcount=0,e.processedcount=0,e.apppaymentount=0,e.failedcount=0,e.spenddata=[],e.spenddataItems=[0,0,0,0,0,0,0,0,0,0,0,0],e.labelData=[],e.ActualValueData=[],e.BudgetValueData=[],e.ActualCompare=[],e.Tabledata=[];var c={},u={},m=[],f={},g={},h=[];i.getInvoices().then(function(l){function i(){return e.Actualcol}if(l){e.invoicesmasterlist=l.d.results,e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlist),e.pendingcount=_.filter(e.invoicesmasterlistcopy,function(e){return"01"==e.ZzinvStatus}).length,e.approvedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"02"==e.ZzinvStatus}).length,e.rejectedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"03"==e.ZzinvStatus}).length,e.reviewcount=_.filter(e.invoicesmasterlistcopy,function(e){return"04"==e.ZzinvStatus}).length,e.holdcount=_.filter(e.invoicesmasterlistcopy,function(e){return"05"==e.ZzinvStatus}).length,e.paidcount=_.filter(e.invoicesmasterlistcopy,function(e){return"01"==e.ZzpayStatus}).length,e.processedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"02"==e.ZzpayStatus}).length,e.apppaymentount=_.filter(e.invoicesmasterlistcopy,function(e){return"03"==e.ZzpayStatus}).length,e.failedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"04"==e.ZzpayStatus}).length,_.each(e.invoicesmasterlistcopy,function(l,i){if("01"===l.ZzpayStatus){var a=l.ZzinvoiceDate+"",r=/\((.*)\)/i,n=a.match(r)[1],s=t("date")(new Date(parseInt(n)),"M");e.spenddataItems[s-1]+=parseInt(l.ZzinvoiceTotal);var s=e.labelData.indexOf(l.ZzmatterName);if(s===-1){e.labelData.push(l.ZzmatterName),e.ActualValueData.push(parseFloat(l.ZZREMAIN_BDGT)),e.BudgetValueData.push(parseFloat(l.ZzmatterBudget));var d="";d=parseFloat(l.ZzmatterBudget)<parseFloat(l.ZZREMAIN_BDGT)?"rgba(2, 223, 84, 0.8)":"rgba(255, 0, 0, 0.8)",e.ActualCompare.push(d)}c[l.ZzlawFirmNo]?c[l.ZzlawFirmNo]=parseFloat(c[l.ZzlawFirmNo])+parseFloat(l.ZzinvoiceTotal):(c[l.ZzlawFirmNo]=parseFloat(l.ZzinvoiceTotal),u[l.ZzlawFirmNo]=l.ZzvendorName),f[l.MatterType]?f[l.MatterType]=parseFloat(f[l.MatterType])+parseFloat(l.ZzinvoiceTotal):(f[l.MatterType]=parseFloat(l.ZzinvoiceTotal),g[l.MatterType]=l.MatterTypeDesc)}}),e.spenddata=[e.spenddataItems],e.spendlabels=["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sep","Oct","Nov","Dec"],e.spendcolors=[{backgroundColor:"rgba(2, 223, 84, 0.8)"}],e.spendoptions={scales:{xAxes:[{stacked:!0,gridLines:{display:!1}}],yAxes:[{stacked:!0,gridLines:{zeroLineWidth:3,zeroLineColor:"rgba(0, 0, 0, 0.8)",display:!0,color:"rgba(255, 255, 255, 0.1)"}}]},tooltips:{callbacks:{label:function(e,l){var t=l.datasets[e.datasetIndex].data[e.index];return": $ "+t}}}},e.Actuallabel=e.labelData,e.Actualdata=[e.ActualValueData],e.ActualTabledata=e.Tabledata,e.Actualcol=e.ActualCompare;var a=e.BudgetValueData;e.Actualcolors=[{}],e.Actualseries=["Actual Cost","Budgeted Cost"];e.datasetOverride1=[{borderWidth:1,backgroundColor:i()}],e.Actualoptions={showAllTooltips:!0,scales:{xAxes:[{gridLines:{zeroLineWidth:3,zeroLineColor:"rgba(0, 0, 0, 0.8)",display:!0,color:"rgba(255, 255, 255, 0.1)"}}],yAxes:[{gridLines:{display:!1}}]},tooltips:{enabled:!0,callbacks:{label:function(e,l){var t=a[e.index],i=l.datasets[e.datasetIndex].data[e.index],r=i/t*100;return r=isNaN(r)?0:Math.round(r,2),[r+" % ","Actual Cost: $ "+i,"Budgeted Cost: $ "+t]}}}};var r=[];angular.forEach(c,function(e,l){r.push(e)}),angular.forEach(u,function(e,l){var t=e.split("-");m.push(t[0])}),e.vendorlabel=m,e.vendordata=[r],e.vendorcolors=[{backgroundColor:"rgba(0,192,226,0.8)"}],e.vendoroptions={scales:{xAxes:[{stacked:!0,gridLines:{display:!1}}],yAxes:[{stacked:!0,gridLines:{zeroLineWidth:3,zeroLineColor:"rgba(0, 0, 0, 0.8)",display:!0,color:"rgba(255, 255, 255, 0.1)"}}]},tooltips:{callbacks:{label:function(e,l){var t=l.datasets[e.datasetIndex].data[e.index];return": $ "+t}}}};var n=[];angular.forEach(f,function(e,l){n.push(e)}),angular.forEach(g,function(e,l){h.push(e)}),e.Matterlabels=h,e.Matterdata=n,e.Matteroptions={legend:{display:!0},tooltips:{callbacks:{label:function(e,l){var t=l.labels[e.index],i=l.datasets[e.datasetIndex].data[e.index];return t+": $ "+i}}}}}}),s(),e.filtergrid=d,e.paymentmode=o}angular.module("lglsystem").controller("dashboardController",e),e.$inject=["$scope","$location","$filter","invoiceService","$timeout","lglsystemData","jrconstants"]}(),function(){"use strict";function e(e,l,t,i,a,r){function n(){r.rejectInvoices(a.selectedrows,e.comments).then(function(e){e&&t.close(e)})}e.comments="",e.rejectinvoice=n,e.cancel=function(){t.dismiss("cancel")}}angular.module("lglsystem").controller("rejectController",e),e.$inject=["$scope","$filter","$modalInstance","$modal","lglsystemData","invoiceService"]}(),function(){"use strict";function e(e,l,t,i,a,r){function n(){r.rejectInvoices(a.selectedrows,e.comments).then(function(e){e&&t.close(e)})}e.comments=a.comments,e.rejectinvoice=n,e.cancel=function(){t.dismiss("cancel")}}angular.module("lglsystem").controller("rejectcommentController",e),e.$inject=["$scope","$filter","$modalInstance","$modal","lglsystemData","invoiceService"]}(),function(){"use strict";function e(e,l,t,i,a,r,n){function s(l){e.datamatter=l,e.matternumber=l.Kunnr,t.getVendorData(l).then(function(l){l&&(e.invoicesmasterlist=l.d.results,e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlist),e.filterOptionColumn())})}function d(l){if("settings"===l){r.settingvariable="timekeepersetting",r.lsmtimekeepercolumns=e.gridData.columnDefs;var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/lsmtimekeepersettings.html",size:"sm",bindToController:!0,controller:"lsmtimekeepersettingsController"});t.result.then(function(l){e.gridData.columnDefs=l},function(){console.log("Modal dismissed at: "+new Date)})}if("filter"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/masterFilter.html",size:"md",bindToController:!0,controller:"masterfilterController"});t.result.then(function(l){e.getInvoiceDetails()},function(){console.log("Modal dismissed at: "+new Date)})}if("reject"===l){var t=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"views/partials/reject.html",size:"md",bindToController:!0,controller:"rejectController"});t.result.then(function(e){var l=e.d.Message;l&&alert(l)},function(){console.log("Modal dismissed at: "+new Date)})}}function o(){u()}function c(t){e.filtergridtype=t;var i=angular.copy(e.invoicesmasterlist);switch(t){case"pending":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"01"});break;case"approved":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"02"});break;case"rejected":e.invoicesmasterlistcopy=l("filter")(i,{ZzinvStatus:"03"})}e.invoicesdetaillistcopy=[]}function u(){t.getClients().then(function(l){l&&(e.clientmaster=l.d.results,e.clientmastercopy=angular.copy(e.clientmaster),e.getallInvoices(e.clientmastercopy[0]))})}function m(l){var t=e.gridData.columnDefs,i=[];_.each(l,function(e){var l={};_.each(t,function(t){if(!_.isUndefined(t.field)){var i=t.name.trim();_.isUndefined(e[i])?l[t.field]="":"Datab"==t.field||"Datbi"==t.field?l[t.field]=p(e[i]):l[t.field]=e[i]}}),l.Kschl=e.Type,i.push(l)});e.exceldata=i,e.exceldatagrid=angular.copy(e.exceldata),e.invoicesmasterlist=angular.copy(e.exceldatagrid),e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlist),e.$apply()}function f(l){e.jsontopost={},e.jsontopost.Uname="EXTLPD",e.jsontopost.CrecToUser=[];var i=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});_.each(i,function(e){delete e.imagedisplay,delete e.isSelect,delete e.info,delete e.__metadata,e.Action=e.Action||l}),e.jsontopost.CrecToUser=i;var a=e.jsontopost,r="";$.ajax({url:n.serviceUrl,headers:{"X-CSRF-Token":"fetch"},success:function(l,n,s){r=s.getResponseHeader("X-CSRF-Token"),t.saveclient(a,r).then(function(l){if(l.data)for(var t=l.data.d.CrecToUser.results,a=0;a<i.length;a++){var r=_.filter(e.invoicesmasterlistcopy,function(e){return e==i[a]}),n=t[a].Message;r[0].info=n,r[0].info.indexOf("ERROR")!=-1||r[0].info.indexOf("Error")!=-1?r[0].imagedisplay="/assets/images/img_alert_split-screen.png":"X"!=t[a].Iserror?r[0].imagedisplay="/assets/images/alertsuccess.png":r[0].imagedisplay="/assets/images/img_alert_split-screen.png"}if(!_.isUndefined(l.error))for(var a=0;a<i.length;a++){var r=_.filter(e.invoicesmasterlistcopy,function(e){return e==i[a]});r[0].info=l.error.message.value,r[0].imagedisplay="/assets/images/img_alert_split-screen.png"}})}})}function g(e){for(var l="",t=0,i=10240;t<e.byteLength/i;++t)l+=String.fromCharCode.apply(null,new Uint8Array(e.slice(t*i,t*i+i)));return l+=String.fromCharCode.apply(null,new Uint8Array(e.slice(t*i)))}function h(e){var l={};return e.SheetNames.forEach(function(t){var i=b.utils.sheet_to_row_object_array(e.Sheets[t]);i.length>0&&(l[t]=i)}),l}function p(e){var l=new Date(e),t=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));return"/Date("+t.getTime()+")/"}e.issideActive=!1,e.dynamicPopover={templateUrl:"gridfilter.html",title:"Filters"},e.invoicesmasterlist=[],e.activesideButton=function(){e.issideActive=!e.issideActive},e.cancel=function(){$modalInstance.dismiss("cancel")},e.invoicesmasterlistcopy=[],e.checkboxmodel={},e.checkboxmodel.clientselectedAll=!1;var C='<md-tooltip md-direction="left" ng-if="row.entity.info">{{row.entity.info}}</md-tooltip><img ng-if="row.entity.info"  ng-src="{{row.entity.imagedisplay}}"></img>',y='<md-checkbox ng-model="row.entity.isSelect"></md-checkbox>',D='<md-checkbox type="checkbox" ng-change="grid.appScope.clientcheckAll()" ng-model="grid.appScope.checkboxmodel.clientselectedAll"></md-checkbox>';e.clientcheckAll=function(){angular.forEach(e.invoicesmasterlistcopy,function(l){l.isSelect=e.checkboxmodel.clientselectedAll})},e.matternumber="",e.gridData={enableSorting:!0,enableRowSelection:!1,enableRowHeaderSelection:!1,enableColumnResizing:!0,multiSelect:!1,enableGridMenu:!1,rowHeight:40,data:"invoicesmasterlistcopy",columnDefs:[{name:"",pinnedLeft:!0,enableFiltering:!1,enableCellEdit:!1,allowCellFocus:!1,headerCellTemplate:D,field:"Kunnr",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:y,width:40},{name:"info",pinnedLeft:!0,enableCellEdit:!1,enableFiltering:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,cellTemplate:C,width:50},{name:"Status",pinnedLeft:!0,enableFiltering:!1,enableCellEdit:!1,field:"Status",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",cellTemplate:'<div class="ui-grid-cell-contents">{{row.entity.Status| vendorfilter}}</div>',width:100},{name:"Matter Name",pinnedLeft:!0,field:"Post1",enableCellEdit:!1,headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:125},{name:"Timekeeper Name",pinnedLeft:!0,enableCellEdit:!1,field:"Sname",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:200},{name:"Rate",enableFiltering:!1,enableCellEdit:!1,field:"Kbetr",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:75},{name:"Currency",enableFiltering:!1,enableCellEdit:!1,field:"Konwa",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Matter",enableCellEdit:!1,field:"Pspid",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:200},{name:"TimeKeeper",field:"Pernr",enableCellEdit:!1,disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",width:200},{name:"DateFrom",enableFiltering:!1,enableCellEdit:!1,field:"Datab",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.Datab| dateFilter | date:'MM/dd/yyyy'}}</div>",width:150},{name:"DateTo",enableFiltering:!1,enableCellEdit:!1,field:"Datbi",disableHiding:!0,headerCellClass:"gridHead gridCell",cellClass:"gridCell",cellTemplate:"<div class=\"ui-grid-cell-contents\">{{row.entity.Datbi| dateFilter | date:'MM/dd/yyyy'}}</div>",width:150},{name:"PricingUnit",enableFiltering:!1,enableCellEdit:!1,field:"Kpein",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150},{name:"Unit",enableFiltering:!1,enableCellEdit:!1,field:"Kmein",headerCellClass:"gridHead gridCell",cellClass:"gridCell",disableHiding:!0,width:150}]},e.gridData.onRegisterApi=function(l){e.gridApi=l,l.selection.on.rowSelectionChanged(e,function(e){"row selected "+e.isSelected;r.selectedrow=e.entity}),l.edit.on.afterCellEdit(e,function(l,t,i,a){l.Odate=l.Datab,l.Action="ADJ",l.Datab=p((new Date).toDateString()),e.$apply()})},e.filterOptionColumn=function(){e.Status=[],e.Matter=[],e.TK=[],e.Rate=[],e.Currency=[],e.PU=[],e.Unit=[],e.DF=[],e.DT=[],e.TKName=[],e.filterCheckedArray=[{fieldname:"Status",checkedarray:[]},{fieldname:"Pspid",checkedarray:[]},{fieldname:"Pernr",checkedarray:[]},{fieldname:"Kbetr",checkedarray:[]},{fieldname:"Konwa",checkedarray:[]},{fieldname:"Kpein",checkedarray:[]},{fieldname:"Kmein",checkedarray:[]},{fieldname:"Datab",checkedarray:[]},{fieldname:"Datbi",checkedarray:[]},{fieldname:"Sname",checkedarray:[]}],e.dataforFiltering=angular.copy(e.invoicesmasterlistcopy),e.dataforFilteringcopy=angular.copy(e.invoicesmasterlistcopy),_.forOwn(e.dataforFiltering,function(l){null!=l.Status&&""!=l.Status&&e.Status.push({FilterValue:l.Status,filterId:"Status"}),null!=l.Pspid&&""!=l.Pspid&&e.Matter.push({FilterValue:l.Pspid,filterId:"Pspid"}),null!=l.Pernr&&""!=l.Pernr&&e.TK.push({FilterValue:l.Pernr,filterId:"Pernr"}),null!=l.Kbetr&&""!=l.Kbetr&&e.Rate.push({FilterValue:l.Kbetr,filterId:"Kbetr"}),null!=l.Konwa&&""!=l.Konwa&&e.Currency.push({FilterValue:l.Konwa,filterId:"Konwa"}),null!=l.Kpein&&""!=l.Kpein&&e.PU.push({FilterValue:l.Kpein,filterId:"Kpein"}),null!=l.Kmein&&""!=l.Kmein&&e.Unit.push({FilterValue:l.Kmein,filterId:"Kmein"}),null!=l.Datab&&""!=l.Datab&&e.DF.push({FilterValue:l.Datab,filterId:"Datab"}),null!=l.Datbi&&""!=l.Datbi&&e.DT.push({FilterValue:l.Datbi,filterId:"Datbi"}),null!=l.Sname&&""!=l.Sname&&e.TKName.push({FilterValue:l.Sname,filterId:"Sname"})}),e.gridFiltercolumDef=angular.copy(e.gridData.columnDefs);var l=angular.copy(e.gridData.columnDefs);_.forOwn(l,function(l){switch(l.field){case"Status":e.Status.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Pspid":e.Matter.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Pernr":e.TK.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Kbetr":e.Rate.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Kpein":e.PU.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Konwa":e.Currency.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Kmein":e.Unit.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Datab":e.DF.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Datbi":e.DT.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1;break;case"Sname":e.TKName.length&&(l.HaveData=!0),l.FiltercolumnDef=[],l.showhide=!1}}),e.gridData.columnDefs=l},e.showhide=function(l,t){var i=angular.copy(e.gridData.columnDefs);_.forOwn(i,function(i){if(i.field===l&&i.name==t)if(i.showhide)i.showhide=!1;else{switch(i.showhide=!0,i.field){case"Status":i.FiltercolumnDef=e.Status;break;case"Pspid":i.FiltercolumnDef=e.Matter;break;case"Pernr":i.FiltercolumnDef=e.TK;break;case"Kbetr":i.FiltercolumnDef=e.Rate;break;case"Konwa":i.FiltercolumnDef=e.Currency;break;case"Kpein":i.FiltercolumnDef=e.PU;break;case"Kmein":i.FiltercolumnDef=e.Unit;break;case"Datab":i.FiltercolumnDef=e.DF;break;case"Datbi":i.FiltercolumnDef=e.DT;break;case"Sname":i.FiltercolumnDef=e.TKName}var a=_.map(_.uniq(_.map(i.FiltercolumnDef,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});i.FiltercolumnDef=a}_.forOwn(e.filterCheckedArray,function(e){i.field===e.fieldname&&_.forOwn(i.FiltercolumnDef,function(l){e.checkedarray.indexOf(l.FilterValue)>-1&&(l.IsSelect=!0)})})}),e.gridData.columnDefs=i},e.chekboxevent=function(l,t,i){i.IsSelect?i.IsSelect=!0:i.IsSelect=!1,_.forOwn(e.filterCheckedArray,function(e){if(e.fieldname==t){var i=e.checkedarray,a=i.indexOf(l);a===-1?e.checkedarray.push(l):e.checkedarray.splice(a,1)}}),e.filterMultipleColumns()},e.popoverclose=function(){$("[data-toggle='popover']").click()},e.filterRemoveItem=function(l,t){_.forOwn(e.filterCheckedArray,function(i){if(i.fieldname===t){var a=i.checkedarray,r=a.indexOf(l);if(r!=-1){i.checkedarray.splice(r,1);var n=angular.copy(e.gridData.columnDefs);_.forOwn(n,function(e){e.FiltercolumnDef&&_.forOwn(e.FiltercolumnDef,function(e){l==e.FilterValue&&(e.IsSelect=!1)})}),e.gridData.columnDefs=n,e.filterMultipleColumns()}}})},e.filterMultipleColumns=function(){var l=!0,t="",i=[];e.setVal=!1,e.finalFilterarray=[],e.Filterdatafil=angular.copy(e.dataforFilteringcopy),_.forOwn(e.filterCheckedArray,function(i){i.checkedarray.length&&l&&(t=i.fieldname,_.forOwn(i.checkedarray,function(l){_.forOwn(e.Filterdatafil,function(t){l!=t.Status&&l!=t.Pspid&&l!=t.Pernr&&l!=t.Kbetr&&l!=t.Konwa&&l!=t.Kpein&&l!=t.Kmein&&l!=t.Datab&&l!=t.Datbi&&l!=t.Sname||e.finalFilterarray.push(t)})}),e.setVal=!0,l=!1)});var a=0;_.forOwn(e.filterCheckedArray,function(l){l.checkedarray.length&&t!=l.fieldname&&_.forOwn(e.finalFilterarray,function(e){_.forOwn(l.checkedarray,function(l){a+=1,l!=e.Status&&l!=e.Pspid&&l!=e.Pernr&&l!=e.Kbetr&&l!=e.Konwa&&l!=e.Kpein&&l!=e.Kmein&&l!=e.Datab&&l!=e.Datbi&&l!=e.Sname||i.push(e)})})}),0===i.length&&0==a&&(i=e.finalFilterarray);var r=_.map(_.uniq(_.map(i,function(e){return JSON.stringify(e)})),function(e){return JSON.parse(e)});e.setVal?e.invoicesmasterlistcopy=r:e.invoicesmasterlistcopy=angular.copy(e.dataforFilteringcopy)},e.pendingcount=0,e.approvedcount=0,e.rejectedcount=0,e.datamatter={},e.getallInvoices=s,e.showFormModal=d,e.getInvoiceDetails=function(){var i=[],n=[],s=[];_.each(r.invoicenumberfilter,function(e){i.push({field:"ZzinvoiceNumber",search:e,search1:"",type:"equal",filtertype:"include",isand:!0})}),_.each(r.matterfilter,function(e){i.push({field:"ZzlawFirmMatterId",search:e,search1:"",type:"equal",filtertype:"include",isand:!0})}),_.each(r.vendornumberfilter,function(e){i.push({field:"Vendor",search:e,search1:"",type:"equal",filtertype:"include",isand:!0})}),_.each(i,function(e){switch(e.type){case"equal":e.isand?n.push({filteredQuery:"("+e.field+" eq '"+e.search+"')",operator:"and"}):n.push({filteredQuery:"("+e.field+" eq '"+e.search+"')",operator:"or"
});break;case"contains":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"substringof('"+e.search+"',"+e.field+")",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:" not substringof('"+e.search+"',"+e.field+")",operator:"and"});break;case"startswith":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"startswith("+e.field+",'"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:" not startswith("+e.field+",'"+e.search+"')",operator:"and"});break;case"endswith":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"endswith("+e.field+",'"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:" not endswith("+e.field+",'"+e.search+"')",operator:"and"});break;case"between":_.isUndefined(e.isDate)?e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"(("+e.field+" ge '"+e.search+"') and ("+e.field+" le '"+e.search1+"'))",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"(not("+e.field+" ge '"+e.search+"') and ("+e.field+" le '"+e.search1+"'))",operator:"and"}):e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"(("+e.field+" ge datetime'"+e.search+"') and ("+e.field+" le datetime'"+e.search1+"'))",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"(not("+e.field+" ge datetime'"+e.search+"') and ("+e.field+" le datetime'"+e.search1+"'))",operator:"and"});break;case"lessthan":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" lt '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" lt '"+e.search+"')",operator:"and"});break;case"lessthanequalto":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" le '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" le '"+e.search+"')",operator:"and"});break;case"greaterthan":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" gt '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" gt '"+e.search+"')",operator:"and"});break;case"greaterthanequalto":e.filtertype&&"exclude"!==e.filtertype?n.push({filteredQuery:"("+e.field+" ge '"+e.search+"')",operator:"and"}):e.filtertype&&"include"!==e.filtertype&&s.push({filteredQueryExclude:"not ("+e.field+" ge '"+e.search+"')",operator:"and"})}});var d=[],o="Erdat",c=l("date")(new Date(r.wrkdate),"yyyy-MM-ddT00:00:00"),u=l("date")(new Date(r.wrkdateto),"yyyy-MM-ddT00:00:00");d="(("+o+" ge datetime'"+c+"') and ("+o+" le datetime'"+u+"'))",t.getInvoicesFilter(n,d).then(function(t){t&&(e.invoicesmasterlist=t.d.results,e.invoicesmasterlistcopy=angular.copy(e.invoicesmasterlist),0!=e.invoicesmasterlistcopy.length&&(e.pendingcount=_.filter(e.invoicesmasterlistcopy,function(e){return"01"==e.ZzinvStatus}).length,e.approvedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"02"==e.ZzinvStatus}).length,e.rejectedcount=_.filter(e.invoicesmasterlistcopy,function(e){return"03"==e.ZzinvStatus}).length,e.invoicesmasterlistcopy=l("filter")(e.invoicesmasterlistcopy,{ZzinvStatus:"01"}),e.filtergridtype="pending",e.gridData.data=e.invoicesmasterlistcopy,a(function(){e.gridApi.selection.selectRow&&e.gridApi.selection.selectRow(e.gridData.data[0])})))})},o(),e.filtergrid=c,e.filterdata=function(){var t=angular.copy(e.invoicesmasterlist);if(""!=e.matterdetailsearchinput){var i=l("filter")(t,e.matterdetailsearchinput,void 0);e.invoicesmasterlistcopy=i}else e.invoicesmasterlistcopy=angular.copy(t)},e.exceldatagrid=[];var b=XLSX;e.handleFile=function(l){var l=document.getElementById("xlf");e.$apply(function(e){var t=l.files[0],i=new FileReader;t.name;i.onload=function(e){var l=e.target.result,t=g(l),i=b.read(btoa(t),{type:"base64"}),a=JSON.stringify(h(i),2,2),r=angular.fromJson(a);m(r.Sheet1),console.log(a)},i.readAsArrayBuffer(t),xlf.value=""})},e.Upload=f,e.isacceptenable=function(){var l=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});return l.length>0},e.isapproveenable=function(){var l=_.filter(e.invoicesmasterlistcopy,function(e){return e.isSelect});if(l.length>0){var t=_.filter(l,function(e){return"P"!=e.Status});return!(t.length>0)}return!1}}angular.module("lglsystem").controller("vendormainController",e),e.$inject=["$scope","$filter","invoiceService","$modal","$timeout","lglsystemData","jrconstants"]}(),angular.module("lglsystem").filter("dateFilter",function(){return function(e){if(null!=e){var l=new Date(parseInt(e.substr(6))),t=new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds());return t}return""}}),angular.module("lglsystem").filter("statusfilter",function(){return function(e){switch(e){case"01":return"Pending";case"02":return"Approved";case"03":return"Rejected"}}}),angular.module("lglsystem").filter("vendorfilter",function(){return function(e){switch(e){case"P":return"Pending";case"A":return"Approved";default:return""}}}),function(){"use strict";function e(e,l,t,i,a){function r(i){function a(e){return e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}var n=l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.InvHeaderSet+l.qParms.DATAJSON;return _.isUndefined(i)||(n=l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.InvHeaderSet+"?filter(filename eq "+i+")"+l.qParms.DATAJSON),e({method:"GET",url:n}).then(a)["catch"](r)}function n(i){function a(e){return console.log(e.data),e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_CREC_UPLOAD_MS_SRV+l.services.VendorDataSet+"(%27"+i.Kunnr+"%27)"+l.services.CrecupdSet+l.qParms.DATAJSON}).then(a)["catch"](r)}function s(i,a){function r(e){return console.log(e.data),e.data}function n(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}var s="";_.each(i,function(e){s=s+e.filteredQuery+e.operator+" "});var d=s.lastIndexOf("and");s=s.substring(0,d);var o=a,c="";return""!==s&&(c="("+s+")"),""!==s&&""!==o&&(c=c+" and "+o),""===s&&""!==o&&(c=o),e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.InvHeaderSet+l.qParms.FILTER+c+l.qParms.JSON}).then(r)["catch"](n)}function d(i){function a(e){return console.log("response.data"),console.log(e.data),e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}var n=l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.InvHeaderSet+"("+l.lsValues.Zzfiletype+"%27"+i.Zzfiletype+"%27,"+l.lsValues.ZzinvoiceNumber+"%27"+i.ZzinvoiceNumber+"%27,"+l.lsValues.Zzseqnr+"%27"+i.Zzseqnr+"%27)"+l.services.InvHeaderToDetail+l.qParms.DATAJSON;return e({method:"GET",url:n}).then(a)["catch"](r)}function o(i){function a(e){return console.log(e.data),e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.InvHeaderSet+"("+l.lsValues.Zzfiletype+"%27"+i.Zzfiletype+"%27,"+l.lsValues.ZzinvoiceNumber+"%27"+i.ZzinvoiceNumber+"%27,"+l.lsValues.Zzseqnr+"%27"+i.Zzseqnr+"%27)"+l.services.InvHeaderToStatus+l.qParms.DATAJSON}).then(a)["catch"](r)}function c(i,a){function r(e){return console.log(e.data),e.data}function n(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}var s="",d="",o="",c="";_.each(i,function(e){s=s+e.Zzfiletype+",",d=d+e.ZzinvoiceNumber+",",o=o+e.Zzseqnr+",",c=c+a+","}),s=s.replaceAll("undefined","");var u=s.lastIndexOf(",");s=s.substring(0,u),","==s&&(s=""),d=d.replaceAll("undefined","");var u=d.lastIndexOf(",");d=d.substring(0,u),","==d&&(d=""),o=o.replaceAll("undefined","");var u=o.lastIndexOf(",");o=o.substring(0,u),","==o&&(o=""),c=c.replaceAll("undefined","");var u=c.lastIndexOf(",");return c=c.substring(0,u),","==c&&(c=""),e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.RejectInvoice+l.lsValues.ZzComments+"%27"+c+"%27&"+l.lsValues.Zzfiletype+"%27"+s+"%27&"+l.lsValues.ZzinvoiceNumber+"%27"+d+"%27&"+l.lsValues.Zzseqnr+"%27"+o+"%27"+l.qParms.JSON}).then(r)["catch"](n)}function u(i){function a(e){return console.log(e.data),e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}var n="",s="",d="";_.each(i,function(e){n=n+e.Zzfiletype+",",s=s+e.ZzinvoiceNumber+",",d=d+e.Zzseqnr+","}),n=n.replaceAll("undefined","");var o=n.lastIndexOf(",");n=n.substring(0,o),","==n&&(n=""),s=s.replaceAll("undefined","");var o=s.lastIndexOf(",");s=s.substring(0,o),","==s&&(s=""),d=d.replaceAll("undefined","");var o=d.lastIndexOf(",");return d=d.substring(0,o),","==d&&(d=""),e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.ApproveInvoice+l.lsValues.Zzfiletype+"%27"+n+"%27&"+l.lsValues.ZzinvoiceNumber+"%27"+s+"%27&"+l.lsValues.Zzseqnr+"%27"+d+"%27"+l.qParms.JSON}).then(a)["catch"](r)}function m(i,a){function r(e){return console.log(e.data),e.data}function n(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}var s="",d="",o="",c="";_.each(i,function(e){s=s+e.Zzfiletype+",",d=d+e.ZzinvoiceNumber+",",o=o+e.Zzseqnr+",",c=c+a+","}),s=s.replaceAll("undefined","");var u=s.lastIndexOf(",");s=s.substring(0,u),","==s&&(s=""),d=d.replaceAll("undefined","");var u=d.lastIndexOf(",");d=d.substring(0,u),","==d&&(d=""),o=o.replaceAll("undefined","");var u=o.lastIndexOf(",");o=o.substring(0,u),","==o&&(o=""),c=c.replaceAll("undefined","");var u=c.lastIndexOf(",");return c=c.substring(0,u),","==c&&(c=""),e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_SRV+l.services.AcceptPending+l.lsValues.Zzfiletype+"%27"+s+"%27&"+l.lsValues.ZzinvoiceNumber+"%27"+d+"%27&"+l.lsValues.Zzseqnr+"%27"+o+"%27"+l.lsValues.Status+"%27"+c+"%27"+l.qParms.JSON}).then(r)["catch"](n)}function f(){function i(e){return console.log(e.data),e.data}function a(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_CREC_UPLOAD_MS_SRV+l.services.VendorDataSet+l.qParms.DATAJSON}).then(i)["catch"](a)}function g(t,i){function a(e){return e}function r(e){return e.data}return e({method:"POST",headers:{"X-CSRF-Token":i,"Content-Type":"application/json"},url:l.WS+l.wsParms.ZPRS_CREC_UPLOAD_SRV+"/UserdataSet",data:t}).then(a)["catch"](r)}function h(i){function a(e){return console.log(e.data),e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),console.log(e)}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_VMATTERS_BUDGET_SRV+l.services.BudgetDetailSet+l.qParms.DATAJSON}).then(a)["catch"](r)}function p(i,a){function r(e){return e.data}function n(e){return t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),e.data}var s="",d="",o="",c="",u="",m="",f="",g="",h="",p="",C="",y="";_.each(i,function(e){s=s+e.Bukrs+"|",d=d+e.Werks+"|",o=o+e.Pspid+"|",c=c+e.Vendor+"|",u=u+e.Status+"|",m=m+e.Name1+"|",f=f+e.Gjahr+"|",g=g+e.Posid+"|",h=h+e.Hkont+"|",p=p+e.Amount+"|",C=C+e.Currency+"|",y=y+e.RecordType+"|"}),s=s.replaceAll("undefined","");var D=s.lastIndexOf("|");s=s.substring(0,D),"|"==s&&(s=""),d=d.replaceAll("undefined",""),D=d.lastIndexOf("|"),d=d.substring(0,D),"|"==d&&(d=""),o=o.replaceAll("undefined",""),D=o.lastIndexOf("|"),o=o.substring(0,D),"|"==o&&(o=""),c=c.replaceAll("undefined",""),D=c.lastIndexOf("|"),c=c.substring(0,D),"|"==c&&(c=""),u=u.replaceAll("undefined",""),D=u.lastIndexOf("|"),u=u.substring(0,D),"|"==u&&(u=""),m=m.replaceAll("undefined",""),D=m.lastIndexOf("|"),m=m.substring(0,D),"|"==m&&(m=""),f=f.replaceAll("undefined",""),D=f.lastIndexOf("|"),f=f.substring(0,D),"|"==f&&(f=""),g=g.replaceAll("undefined",""),D=g.lastIndexOf("|"),g=g.substring(0,D),"|"==g&&(g=""),h=h.replaceAll("undefined",""),D=h.lastIndexOf("|"),h=h.substring(0,D),"|"==h&&(h=""),p=p.replaceAll("undefined",""),D=p.lastIndexOf("|"),p=p.substring(0,D),"|"==p&&(p=""),C=C.replaceAll("undefined",""),D=C.lastIndexOf("|"),C=C.substring(0,D),"|"==C&&(C=""),y=y.replaceAll("undefined",""),D=y.lastIndexOf("|"),y=y.substring(0,D),"|"==y&&(y="");var b=l.lsValues.Bukrs+"'"+s+"'",v=l.lsValues.Werks+"'"+d+"'",Z=l.lsValues.Pspid+"'"+o+"'",z=l.lsValues.Vendor+"'"+c+"'",w=l.lsValues.Status+"'"+u+"'",k="",F=l.lsValues.Gjahr+"'"+f+"'",S=l.lsValues.Posid+"'"+g+"'",I=l.lsValues.Hkont+"'"+h+"'",H=l.lsValues.Amount+"'"+p+"'",T=l.lsValues.RecordType+"'"+y+"'",A=l.lsValues.Currency+"'"+C+"'"+l.qParms.JSON;return e({method:"GET",url:encodeURI(l.WS+l.wsParms.ZPRS_LSW_VMATTERS_BUDGET_SRV+"/"+a+"?"+b+v+Z+z+w+k+F+S+I+H+T+A)}).then(r)["catch"](n)}function C(i,a){function r(e){return e}function n(e){return t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),e.data}var s=l.WS+l.wsParms.ZPRS_LSW_SRV+"/UploadInvoiceCollection",d=new FormData;return d.append("file",a),e.post(s,d,{transformRequest:angular.identity,headers:{"X-CSRF-Token":i,"Content-Type":void 0,slug:a.name}}).then(r)["catch"](n)}function y(i,a,r){function n(e){return e}function s(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok"))}var d=l.WS+l.wsParms.ZPRS_FILE_ATTCH_SRV+"/FileAttachSet",o=new FormData;return o.append("file",r),e.post(d,o,{transformRequest:angular.identity,headers:{"X-CSRF-Token":a,"Content-Type":void 0,slug:i.Vbeln+"|"+i.Name}}).then(n)["catch"](s)}function D(i){function a(e){return e.data}function r(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok"))}var n="(Vbeln   eq'"+i+"')";return e({method:"GET",url:encodeURI(l.WS+l.wsParms.ZPRS_FILE_ATTCH_SRV+l.services.FileListSet+l.qParms.FILTER+n+l.qParms.JSON)}).then(a)["catch"](r)}function b(e){var t="/FileDispCollection(Loio='"+e.LoioId+"',Ext='"+e.Docuclass+"',Fname='"+e.Descript+"')",i=encodeURI(l.WS+l.wsParms.ZPRS_FILE_ATTACHMENT_SRV+t+l.qParms.value);window.open(i)}function v(i,a){function r(e){return e.data}function n(e){return t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok")),e.data}var s="/FileListSet(Vbeln='"+i+"',Objkey='"+a.LoioId+"')/FileDelete?";return e({method:"GET",url:encodeURI(l.WS+l.wsParms.ZPRS_FILE_ATTCH_SRV+s+l.qParms.JSON)}).then(r)["catch"](n)}function Z(t,i){function a(e){return console.log(e.data),e.data}function r(e){console.log(e)}var n="";_.each(t,function(e){n=n+e.filteredQuery+e.operator+" "});var s=n.lastIndexOf("and");n=n.substring(0,s);var d=i,o="";return""!==n&&(o="("+n+")"),""!==n&&""!==d&&(o=o+" and "+d),""===n&&""!==d&&(o=d),e({method:"GET",url:l.WS+l.wsParms.ZPRS_MATTER_SUMMARY_REPT_SRV+l.services.MatterReptSet+l.qParms.FILTER+o+l.qParms.JSON}).then(a)["catch"](r)}function z(){function i(e){return console.log(e.data),e.data}function a(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok"))}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_CMATTER_SEARCHHELP_SRV+l.services.ZprsShWerksSet+l.qParms.DATAJSON}).then(i)["catch"](a)}function w(){function i(e){return console.log(e.data),e.data}function a(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok"))}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_LSW_CMATTERS_SRV+l.services.HeaderSet+l.qParms.DATAJSON}).then(i)["catch"](a)}function k(){function i(e){return console.log(e.data),e.data}function a(e){t.show(t.alert().title("ERROR").textContent("Server Error").ariaLabel("Alert Dialog Demo").ok("Ok"))}return e({method:"GET",url:l.WS+l.wsParms.ZPRS_MATTER_SUMMARY_REPT_SRV+l.services.CounVendorSet+l.qParms.DATAJSON}).then(i)["catch"](a)}String.prototype.replaceAll=function(e,l){return this.split(e).join(l)};var F={getInvoices:r,getDetailInvoices:d,rejectInvoices:c,createInvoices:u,getInvoicesFilter:s,getDetailInvoicesstatus:o,getClients:f,getVendorData:n,saveclient:g,getBudjetData:h,budjetactions:p,acceptpending:m,FileUploadclient:C,getFileList:D,getFileDownload:b,deletedocument:v,FileUploadAttachclient:y,getMatters:w,getCounVendorSet:k,getZprsShWerksSet:z,getmattersummaryreport:Z};return F}angular.module("lglsystem").factory("invoiceService",e),e.$inject=["$http","jrconstants","$mdDialog","$filter","dateFilter"]}(),function(){"use strict";function e(){var e,l,t,i,a,r,n,s,d=[],o=[],c=[],u=!1,m=[],f="",g="",h="",p="",C="",y={selectedrow:e,invoicenumberfilter:d,matterfilter:o,vendornumberfilter:c,wrkdate:l,wrkdateto:n,selectedrows:m,selectedinvoiceNumber:f,comments:g,lsmdetailscolumns:t,detailmode:u,lsmdetailsdatacolumns:i,lsmtimekeepercolumns:a,lsmbudetcolumns:r,settingvariable:s,gridtype:h,paymentmode:p,paymode:C};return y}angular.module("lglsystem").factory("lglsystemData",e)}();